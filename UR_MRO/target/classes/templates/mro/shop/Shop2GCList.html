<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- include 公共head -->
<head th:include="common/common_head :: commonHeader('demo')"></head>
<style scoped>
	[v-cloak] {
		display: none;
	}

	html,
	body {
		height: 100%;
	}

	#app {
		height: 100%;
	}

	#app1 {
		width: 100%;
		height: 100%;
		display: flex;
		flex-direction: column;
		position: relative;
	}

	#appbox {
		height: 100%;
		display: flex;
		flex-direction: column;
		position: relative;
	}

	/*配置弹窗——————————————————————————————————————————————————————*/

	.tanpeizhi {
		width: 100%;
		height: 100%;
		background: rgba(127, 127, 127, 0.5);
		position: absolute;
		top: 0;
		left: 0;
		z-index: 10;
		display: flex;
		justify-content: flex-end;
		/*opacity: 0.2;*/
	}

	.el-checkbox.is-bordered {
		width: 120px;
	}

	.el-checkbox.is-bordered+.el-checkbox.is-bordered {
		margin: 10px !important;
	}

	.tanpeizhi .peizhibox {
		height: 100%;
		width: 440px;
		background: white;
		display: flex;
		flex-wrap: wrap;
		justify-content: flex-start;
		align-items: flex-start;
		padding: 10px;
		box-sizing: border-box;
		align-content: flex-start;
	}

	.control-bar {
		height: 40px;
		width: 100%;
		background: #ffffff;
	}

	.control-bar .MYcontainer {
		display: flex;
		align-items: center;
		height: 40px;
		background: #ffffff;
	}

	.search-bar {
		/*height: 206px;*/
		width: 100%;
		background: white;
	}

	.search-bar .MYcontainer {
		/*height: 206px;*/
		background: #ffffff;
		/*border: 1px solid #eef1f6;*/
		box-sizing: border-box;
		border-radius: 5px;
	}

	.action-bar {
		min-height: 50px;
		width: 100%;
		background: white;
	}

	.action-bar .MYcontainer {
		min-height: 50px;
		background: #ffffff;
		display: flex;
		align-items: center;
		justify-content: space-between;
		flex-wrap: wrap;
	}

	.action-bar .MYcontainer .action-left {
		margin: 2px;
	}

	.action-left .el-button {
		box-shadow: 2px 2px 2px #CCCCCC;
	}

	.action-bar .MYcontainer .action-right {
		flex: 0.2;
		height: 40px;
		background: white;
		display: flex;
		align-items: center;
		justify-content: flex-end;
	}

	.main-bar {
		flex: 1;
		width: 100%;
		background: white;
		overflow: auto;
	}

	.main-bar .MYcontainer {
		height: 100%;
		/*background: pink;*/
		/*border: 1px solid #eef1f6;*/
		box-sizing: border-box;
	}

	/*.el-table {
            height: 100% !important;
        }*/

	.el-table td,
	.el-table th.is-leaf {
		text-align: center;
	}

	.fade-enter-active,
	.fade-leave-active {
		transition: opacity 0.5s;
	}

	.fade-enter,
	.fade-leave-to
		/* .fade-leave-active below version 2.1.8 */

	{
		opacity: 0;
	}

	.el-table th {
		background: linear-gradient(to bottom, #fdfdfd, #f1f7ff);
	}

	.el-table thead {
		background: linear-gradient(to bottom, #fdfdfd, #f1f7ff);
	}

	.el-form-item {
		margin-bottom: 10px;
	}

	.el-form-item__label {
		address: #666666 !important;
	}

	/*.el-table__fixed-body-wrapper {
            top: 48px !important;
        }*/
	/*.el-table__footer-wrapper,
        .el-table__header-wrapper {
            height: 48px !important;
        }*/

	.el-table--scrollable-y .el-table__body-wrapper {
		flex: 1 !important;
	}

	.el-table .el-table--fit .el-table--scrollable-x .el-table--scrollable-y .el-table--enable-row-hover .el-table--enable-row-transition {
		display: flex;
	}

	.el-table__body tr.cuurent-row>td {
		background: skyblue;
	}

	.el-table td {
		padding: 0;
	}

	.gutter {
		display: none;
	}

	/*.el-dialog__body{
            display: flex;
            justify-content: center;
            align-items: center;

        }

        .el-dialog__header{
            min-width: 500px !important;
        }
        .el-dialog__body{
            min-width: 500px !important;
        }
        .el-dialog .el-dialog--center{
            min-width: 500px !important;
        }*/

	.customWidth {
		min-width: 500px;
	}

	.mubantip {
		width: 100%;
		/*min-height: 38px;*/
		line-height: 38px;
		text-align: center;
		background: #ECECEC;
		margin-top: 10px;
		margin-bottom: 10px;
		address: red;
	}

	.el-pagination__jump {
		margin-left: 0 !important;
	}

	.el-pagination__sizes {
		margin: 0 !important;
	}

	.el-pagination__total {
		margin-right: 0 !important;
	}

	.el-pagination.is-background .btn-next,
	.el-pagination.is-background .btn-prev,
	.el-pagination.is-background .el-pager li {
		margin: 0px 2px !important;
	}

	.el-button+.el-button {
		margin-left: 0 !important;
	}

	.peizhibox .el-form-item {
		margin: 10px 0;
	}

	.el-carousel__item.is-animating {
		transition: noset !important;
	}

	.el-dialog--center {
		height: 80%;
		display: flex !important;
		flex-direction: column !important;
	}

	.el-dialog__body {
		flex: 1 !important;
		display: flex !important;
		flex-direction: column !important;
	}

	.el-carousel--horizontal {
		flex: 1 !important;
		display: flex !important;
		flex-direction: column !important;
	}

	.el-carousel__MYcontainer {
		flex: 1;
	}
	.WLcodebox{
		cursor: pointer;
		color: #606266;
		background: #efefef;
		border-radius: 7px;
	}
	.WLcodebox:hover{
		background: skyblue;
		address: white;
	}
</style>

</head>

<body>

<div id='app' v-cloak>
	<div id='app1' v-cloak>
		<div id="appbox" v-cloak>
			<transition name="fade">
				<div class="tanpeizhi" @click='onctrshow' v-show="ctrshowtankuang">
					<div class="peizhibox" v-show='ctrshow_peizhi'>
						<!--<el-checkbox v-model="ctrpeizhi.ct_xvhao" label="序号" border style='margin:10px;'></el-checkbox>-->
						<el-checkbox v-model="ctrpeizhi.ct_tupian" label="图片" disabled border fill='#409EFF'
									 style='margin:10px;'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_code" label="店铺编号" disabled border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_name" label="店铺名称" disabled border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_region" label="大区" border></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_expectedOpenTime" label="预计开业时间" border fill='#409EFF'>
						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_CONTACTS" label="联系人" border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_TELEPHONE" label="固定电话" border fill='#409EFF'>

						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_MOBILEPHONE" label="移动电话" border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_spec" label="类型" border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_salesLevel" label="销售级别" border fill='#409EFF'>
						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_brandType" label="品牌" border fill='#409EFF'>
						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_imageLevel" label="形象级别" border fill='#409EFF'>
						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_province" label="省份" border fill='#409EFF'>
						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_city" label="城市" border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_address" label="地址" border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_shopWinCount" label="橱窗数量" border fill='#409EFF'></el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_lastUpdatedBy" label="橱窗最后更新人" border fill='#409EFF'>
						</el-checkbox>
						<el-checkbox v-model="ctrpeizhi.ct_createdDate" label="橱窗最后更新时间" border fill='#409EFF'>
						</el-checkbox>
						
						<el-button @click='onpeizhiwancheng' style='width:100%' type="primary" plain>保存配置项
						</el-button>
					</div>

					<div class="peizhibox" v-show='ctrshow_search' style='width: 810px;'>
						<div class="btnbox" style='margin-bottom: 10px;'>
							<el-button @click='tosearch' style='box-shadow: 2px 2px 2px #ccc;margin-right: 10px;'
									   type="primary" plain>查询</el-button>
							<el-button style='box-shadow: 2px 2px 2px #ccc;' type="info" plain @click="resetForm('queryCondition')">重置</el-button>
						</div>
						<el-form
								class="demo-dynamic"
								:model="queryCondition"
								ref="queryCondition"
								label-width="100px"
								style='display: flex;
    flex-wrap: wrap;
    padding: 4px 0px;
    border: 1px solid rgb(204, 204, 204);
    background: linear-gradient(to top, rgb(255, 255, 255), rgb(218, 232, 251));
    border-radius: 10px;
    margin-bottom: 10px;
    box-shadow: rgb(204, 204, 204) 2px 2px 2px;'>
							<el-form-item label="物料编码" style='width:48%' prop="code">
								<el-input type="text" v-model="queryCondition.code"></el-input>
							</el-form-item>
							<el-form-item label="店铺名称" style='width:48%' prop="name">
								<el-input type="text" v-model="queryCondition.name"></el-input>
							</el-form-item>
							<el-form-item label="预计开业时间" style='width:48%' prop="expectedOpenTime">
								<el-input type="date" v-model="queryCondition.expectedOpenTime"></el-input>
							</el-form-item>
							<el-form-item label="联系人" style='width:48%' prop="CONTACTS">
								<el-input type="text" v-model="queryCondition.CONTACTS"></el-input>
							</el-form-item>
							<el-form-item label="品牌" style='width:48%' prop="brandType">
								<el-input type="text" v-model="queryCondition.brandType"></el-input>
							</el-form-item>

							<el-form-item label="形象级别" style='width:48%' prop="imageLevel">
								<el-input type="text" v-model="queryCondition.imageLevel"></el-input>
							</el-form-item>
							<el-form-item label="省份" style='width:48%'  prop="province">
								<el-input type="text" v-model="queryCondition.province"></el-input>
							</el-form-item>

							<el-form-item label="橱窗数量" style='width:48%' prop="shopWinCount">
								<el-input type="text" v-model="queryCondition.shopWinCount"></el-input>
							</el-form-item>

						</el-form>
					</div>
				</div>
			</transition>

			<!--<transition name="fade">
                    <div class="tanpeizhi" @click='onctrshow' v-show="ctrshowimg">
                        <div class="peizhibox">
                            333333333
                            <img src="" / style='width: 80%;height: 80%;'>
                        </div>

                    </div>
                </transition>-->
			<el-dialog :visible.sync="dialogVisible" @close='closeDialog' :fullscreen='fullscreen' width='50%'
					   height='800px' center>
				<template>
					<!--<el-button @click='fangdaimgbox'>全屏</el-button>-->
					<el-carousel :initial-index='0' arrow="always" height='100%' indicator-position="outside"
								 :autoplay='false'>
						<el-carousel-item v-for="(item,index) in dialogImageUrl" :key="index"
										  style='display: flex;justify-content: center;'>
							<img :src="item" alt="" style='max-width: 100%;height: 100%;'>
						</el-carousel-item>
					</el-carousel>
				</template>

			</el-dialog>

			<el-dialog :visible.sync="dialogdaochu">
				<el-button>
					<a href="http://dev-ims.ur.com.cn:9090/template/TransferTemplate.xlsx">模板下载</a>
				</el-button>
				<div class="mubantip">
					当前导入的excel文件的数据日期必须一致！且导入数据只做新增，不做修改保存，若数据行已存在系统中，将忽略该行数据！
				</div>
				<el-upload
						:limit='1' accept='.xlsx,.xls'
						class="upload-demo"
						action="importMaterialExcel"

						:on-success="handleChange"
						:file-list="fileList">
					<el-button size="small" type="primary">点击上传</el-button>
					<div slot="tip" class="el-upload__tip">只能上传.xlsx,.xls文件，且不超过500kb</div>
				</el-upload>
			</el-dialog>

			<div class="control-bar">
				<div class="MYcontainer">
					<!--<el-tooltip :content="'Switch value: ' + value" placement="top">-->
					<el-switch active-text="" inactive-text="搜索" v-model="ctrshow_search" active-address="skyblue"
							   inactive-address="#ccc" active-value='1' inactive-value='0' @change='inchange'
							   style='margin-right: 20px;'>
					</el-switch>

					<el-switch active-text="" inactive-text="显示列配置" v-model="ctrshow_peizhi" active-address="skyblue"
							   inactive-address="#ccc" active-value='1' inactive-value='0' @change='changepeizhi'>
					</el-switch>
					<!--</el-tooltip>-->
				</div>
			</div>

			<div class="action-bar">

				<div class="MYcontainer">
					<div class="action-left">
						<el-button icon='el-icon-folder-add' size='small' @click='toadd'>
							新增
						</el-button>
						<el-button icon='el-icon-edit' @click='toedit' size='small'>编辑</el-button>
						<el-button icon='el-icon-delete' @click='todel' size='small'>删除</el-button>
						<!--<el-button icon='el-icon-close' @click='tostop' size='small'>禁用</el-button>-->
						<el-button icon='el-icon-view' @click='tolook' size='small'>查看</el-button>
					<!--	<el-button icon='el-icon-document-copy' @click='tocopy' size='small'>复制</el-button>-->
						<!--<el-button icon='el-icon-download' @click='todownload' size='small' :loading="daochuloading">导出</el-button>-->
						<el-button icon='el-icon-position' size='small' @click='todaoru'>导入</el-button>
						<el-button icon='el-icon-upload2' @click='tosendOA' size='small'>同步OA</el-button>
						<el-button icon='el-icon-edit' @click='toshopshow' size='small'>店铺橱窗</el-button>
					</div>

					<!--分页组件————————————————————————————————-->

					<div class="action-right">
						<el-pagination background
									   @current-change="handleCurrentChange"
									   @size-change="handleSizeChange"
									   :current-page="queryResult.currPage"
									   :page-sizes="[20, 40, 80, 100]" :page-size="queryResult.pageSize"
									   layout="total, sizes, prev, pager, next, jumper" :total="queryResult.totalRecordNum">
						</el-pagination>
					</div>

				</div>
			</div>

			<div class="main-bar" v-loading="loading">
				<div class="MYcontainer">

					<el-table

							height='100%'
							empty-text="当前没有店铺数据"
							:row-style="rowClass"
							ref="multipleTable"
							:data="tableData"
							tooltip-effect="dark"
							@row-click="handleRowClick"
							@row-dblclick="dbhandleRowClick"
							@selection-change="handleSelectionChange"
					>
						<el-table-column  fixed type="selection" width="50">
						</el-table-column>
						<!--<el-table-column label="序号" fixed v-if='ctrpeizhi.ct_xvhao' width="50">-->
						<!--<template slot-scope="scope">{{ scope.row.xvhao }}</template>-->
						<!--</el-table-column>-->
						<el-table-column label="店铺编号" v-if='ctrpeizhi.ct_code' min-width='150' >
							<template slot-scope="scope" >
								<div class='WLcodebox' @click.stop="togoedit(scope.row)">
									{{ scope.row.code==null||scope.row.code==''?'无':scope.row.code}}
								</div>


							</template>
						</el-table-column>
						<el-table-column  label="店铺名称"  v-if='ctrpeizhi.ct_name' min-width='200'>
							<template slot-scope="scope">{{ scope.row.name==null||scope.row.name==''?'无': scope.row.name}}</template>
						</el-table-column>

						<el-table-column label="大区" min-width="150" v-if='ctrpeizhi.ct_region'>
							<template slot-scope="scope">{{ scope.row.region==null||scope.row.region==''?'无':scope.row.region }}</template>
						</el-table-column>
						<el-table-column label="预计开业时间" min-width="100" v-if='ctrpeizhi.ct_expectedOpenTime'>
							<template slot-scope="scope">{{ scope.row.expectedOpenTime==null||scope.row.expectedOpenTime==''?'无':scope.row.expectedOpenTime }}</template>
						</el-table-column>
						<el-table-column label="联系人" min-width="100" v-if='ctrpeizhi.ct_CONTACTS'>
							<template slot-scope="scope">{{ scope.row.CONTACTS==null||scope.row.CONTACTS==''?'无':scope.row.CONTACTS }}</template>
						</el-table-column>
						<el-table-column label="固定电话" min-width="100" v-if='ctrpeizhi.ct_TELEPHONE'>
							<template slot-scope="scope">{{ scope.row.TELEPHONE==null||scope.row.TELEPHONE==''?'无':scope.row.TELEPHONE }}</template>
						</el-table-column>
						<el-table-column label="移动电话" min-width="100" v-if='ctrpeizhi.ct_MOBILEPHONE'>
							<template slot-scope="scope">{{ scope.row.MOBILEPHONE==null||scope.row.MOBILEPHONE==''?'无':scope.row.MOBILEPHONE }}</template>
						</el-table-column>
						<el-table-column label="类型" min-width="100" v-if='ctrpeizhi.ct_spec'>
							<template slot-scope="scope">{{ scope.row.type==null||scope.row.type==''?'无':scope.row.type }}</template>
						</el-table-column>
						<el-table-column label="销售级别" min-width="100" v-if='ctrpeizhi.ct_salesLevel'>
							<template slot-scope="scope">{{ scope.row.salesLevel==null||scope.row.salesLevel==''?'无':scope.row.salesLevel}}</template>
						</el-table-column>
						<el-table-column label="品牌" min-width="100" v-if='ctrpeizhi.ct_brandType'>
							<template slot-scope="scope">{{ scope.row.brandType==null||scope.row.brandType==''?'无':scope.row.brandType}}</template>
						</el-table-column>
						<el-table-column label="形象级别" min-width="100" v-if='ctrpeizhi.ct_imageLevel'>
							<template slot-scope="scope">{{ scope.row.imageLevel==null||scope.row.imageLevel==''?'无':scope.row.imageLevel}}</template>
						</el-table-column>
						<el-table-column label="省份" min-width="100" v-if='ctrpeizhi.ct_province'>
							<template slot-scope="scope">{{ scope.row.province==null||scope.row.province==''?'无':scope.row.province}}</template>
						</el-table-column>
						<el-table-column label="城市" min-width="100" v-if='ctrpeizhi.ct_city'>
							<template slot-scope="scope">{{ scope.row.city==null||scope.row.city==''?'无':scope.row.city}}</template>
						</el-table-column>
						<el-table-column label="地址" min-width="200" v-if='ctrpeizhi.ct_address'>
							<template slot-scope="scope">{{ scope.row.address==null||scope.row.address==''?'无':scope.row.address}}</template>
						</el-table-column>
						<el-table-column label="橱窗数量" min-width="100" v-if='ctrpeizhi.ct_shopWinCount'>
							<template slot-scope="scope">{{ scope.row.shopWinCount==null||scope.row.shopWinCount==''?'无':scope.row.shopWinCount}}</template>
						</el-table-column>
						<el-table-column label="橱窗最后更新人" min-width="120" v-if='ctrpeizhi.ct_lastUpdatedBy'>
							<template slot-scope="scope">{{ scope.row.lastUpdatedBy==null||scope.row.lastUpdatedBy==''?'无':scope.row.lastUpdatedBy}}</template>
						</el-table-column>
						<el-table-column label="橱窗最后更新时间" width="120" v-if='ctrpeizhi.ct_createdDate'>
							<template slot-scope="scope">{{ scope.row.lastUpdatedTime==null||scope.row.lastUpdatedTime==''?'无':scope.row.lastUpdatedTime}}</template>
						</el-table-column>
					</el-table>

				</div>
			</div>
		</div>
	</div>
</div>
<div th:include="common/onload_js :: onloadJS"></div>
<script  th:inline="javascript">
	/*<![CDATA[*/
	var vm = new Vue({
		el: '#app',
		data: {
			PKID:'',
//			物料主数据请求地址————————————————————————————
			WLurl: '/shop/Shop2GC/search',
			deletWLurl:'/shop/deleteShop2GCEdit',
			copyWLurl:'/shop/copyShop2GCEdit',
			editWLurl:'/shop/Shop2GCEdit',

			updateBatchshopWinCountWLurl:'/shop/updateBatchshopWinCount',
			pickerOptions2: {
				shortcuts: [{
					text: '最近一周',
					onClick(picker) {
						const end = new Date();
						const start = new Date();
						start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);
						picker.$emit('pick', [start, end]);
					}
				}, {
					text: '最近一个月',
					onClick(picker) {
						const end = new Date();
						const start = new Date();
						start.setTime(start.getTime() - 3600 * 1000 * 24 * 30);
						picker.$emit('pick', [start, end]);
					}
				}, {
					text: '最近三个月',
					onClick(picker) {
						const end = new Date();
						const start = new Date();
						start.setTime(start.getTime() - 3600 * 1000 * 24 * 90);
						picker.$emit('pick', [start, end]);
					}
				}]
			},
			value3: [new Date(2000, 10, 10, 10, 10), new Date(2000, 10, 11, 10, 10)],
			value4: '',
			fullscreen: false,
			ctrshow_peizhi: '0',
			ctrshow_search: '0',
			selectRow: [],
			selectData: [],
			ctrpeizhi: {},
			checked1: '',
			checked2: '',
			ctrshowtankuang: false,
			valuepeizhi: '0',



			valuesearch: '0',
			ctrshow: false,
			tableHeight: 50,
			theight: '100%',

			//					主数据数据————————————————————————————————————————————
			tableData: [],

			multipleSelection: [],
			currentPage4: 1,
			currentPage: 1,
			loading: false,
			dialogImageUrl: [],
			dialogVisible: false,
			dialogdaochu: false,
			fileList: [],
			queryResult: {
				totalRecordNum:20,
				currPage: 1,
				pageSize: 20
			},
			queryCondition: {
				id: '',
				name: '',
				code: '',
				brandType: '',
				categoryA: '',
				categoryB: '',
				province: '',
				matType: '',
				shopWinCount: ''

			},
			daochuloading:false

		},
		created(){
//					获取物料主数据方法——————————————————————————————————————————————
			this.queryMaterial();
		},
		mounted() {

			console.log([[${brandType}]])


			// console.log(localStorage.getItem('zhushuju_peizhi'))

			if (localStorage.getItem('zhushuju_peizhi') == null) {
				console.log('没数据')
				let peizhidata = {
					ct_xvhao: true, //物料序号
					ct_code: true, //物料编码
					ct_name: true, //店铺名称
					ct_tupian: true, //图片路径
					ct_region: true, //matdepict
					ct_expectedOpenTime: true, //matType
					ct_CONTACTS: true, //brand
					ct_TELEPHONE: true, //店铺形象名称
					ct_MOBILEPHONE: true, //单位名称
					ct_spec: true, //类型
					ct_salesLevel: true, //销售级别
					ct_brandType: true, //品牌名称
					ct_imageLevel: true, //形象级别名称
					ct_province: true, //省份名称
					ct_address: true, //大地址
					ct_shopWinCount: true, //橱窗数量
					ct_lastUpdatedBy: true, //橱窗最后更新人
					ct_createdDate: true, //橱窗最后更新时间
					ct_lastModifiedBy: true, //更新人
					ct_lastModifiedDate: true, //更新时间
					ct_city: true //城市
				}
				this.ctrpeizhi = peizhidata;
			} else {
				this.ctrpeizhi = JSON.parse(localStorage.getItem('zhushuju_peizhi'));

			}

		},
		watch: {
			selectData(data) {
				this.selectRow = [];
				if (data.length > 0) {
					data.forEach((item, index) => {
						this.selectRow.push(this.tableData.indexOf(item));
				});
				}
			}
		},
		methods: {
			// 表格行的双击操作
			// todbrow(row, event){
			//    console.log(row);
			//    console.log(event);
			//    alert()
			// },
			// 获取物料数据————————————————————————
			dbhandleRowClick(row){
				window.open(`${this.editWLurl}?id=${row.id}`,'_self')
			},
			tochangeL(val,row){
				this.queryCondition.categoryB='';
				this.queryCondition.province='';
			},
			tochangeM(val,row){
				this.queryCondition.province='';
			},
			queryMaterial() {
				this.loading=true;
				var restRequest = new URRestRequest();
				restRequest.addCondition("name", this.queryCondition.name, "like");
				restRequest.addCondition("code", this.queryCondition.code, "like");
				restRequest.addCondition("categoryA", this.queryCondition.categoryA, "eq");
				restRequest.addCondition("categoryB", this.queryCondition.categoryB, "eq");
				restRequest.addCondition("province", this.queryCondition.province, "eq");
				restRequest.addCondition("matType", this.queryCondition.matType, "eq");
				restRequest.addCondition("shopWinCount", this.queryCondition.shopWinCount, "eq");
				restRequest.setCurrPage(this.queryResult.currPage);
				restRequest.setPageSize(this.queryResult.pageSize);
				axios.post(this.WLurl, restRequest.getRequestData())
						.then((response) => {
					// console.log(response.data)
					setTimeout(()=>{
					console.log(response.data)
					this.queryResult=response.data;
					this.tableData = response.data.data;
					this.loading=false;
				},500)
			})
			.catch((error) => {
					this.loading=false;
				// alert(error);
				this.$message({
					message: '查询数据失败,请联系系统管理员',
					type: 'error'
				});


			});
			},
			tostop(){
				console.log(this.selectData)

				this.$confirm('此操作将禁用该物料, 是否继续?', '提示', {
					confirmButtonText: '确定',
					cancelButtonText: '取消',
					type: 'warning'
				}).then(() => {
					if (this.selectData.length == 0) {
					this.$message({
						message: '请选择需要禁用的物料主数据',
						type: 'warning',
						center: true
					});
				} else {
					axios.put(this.updateBatchshopWinCountWLurl, this.selectData).then(response=> {
						if(response.data.code==null||response.data.code!=0){
						this.$message.error(response.data.message);
						this.$data.loading = false;
					}else{
						this.$message({
							message:'禁用成功',
							type: 'success',
							center: true
						});
						this.$data.loading = false;
						this.queryMaterial(this.queryResult.currPage);
					}
				}).catch(function (error) {
						this.$message.error('禁用失败,请联系系统管理员');
					});
				}

			}).catch(() => {
					this.$message({
						type: 'info',
						message: '已取消禁用',
						center: true
					});
			});


			},

			todownload() {

				if(this.queryResult.totalRecordNum>500){
					this.$confirm('由于您导出的数据大于500条,可能需要较长的时间,是否继续导出?','提示',{
						confirmButtonText: '确定',
						cancelButtonText: '取消',
						type: 'warning'
					}).then(() => {
						console.log('正在导出')

						this.todaochu();
				}).catch(() => {
						this.$message({
							type: 'info',
							message: '已取消导出操作'
						});
				});
				}else{
					console.log('正在导出')
					this.todaochu();
				}


			},
			todaochu(){
				this.daochuloading=true;
				this.$message('正在努力导出中，请耐心等待');
				var url = 'Material/export';
				var restRequest = new URRestRequest();
				restRequest.addCondition("name", this.queryCondition.name, "like");
				restRequest.addCondition("code", this.queryCondition.code, "like");
				restRequest.addCondition("categoryA", this.queryCondition.categoryA, "eq");
				restRequest.addCondition("categoryB", this.queryCondition.categoryB, "eq");
				restRequest.addCondition("province", this.queryCondition.province, "eq");
				restRequest.addCondition("matType", this.queryCondition.matType, "eq");
				restRequest.addCondition("shopWinCount", this.queryCondition.shopWinCount, "eq");
				axios.post(url,restRequest.getRequestData())
						.then(response=> {

					if(response.data.code==null||response.data.code!=0){
					this.$message.error('导出失败,请联系系统管理员');
					this.$data.exportingFile = false;
					this.daochuloading=false;

				}else{
					var downloadLink = "/DownloadFile/"+response.data.data.fileName+"/"+response.data.data.extName;
					this.$data.exportingFile = false;
					downloadFile(downloadLink);
					this.daochuloading=false;
					this.$message.success('导出成功');
				}
			})
			.catch(error=>{
					console.log(error);
				this.daochuloading=false;
				this.$message.error('导出失败,请联系系统管理员');

			});
			},
			toshopshow(){
				this.$message('此功能为开放!');
			},
			handleChange(response, file, fileList) {
				if(response.success==true){
					this.$message.success(response.message);
				}else if(response.success==false){
					this.$message.error(response.message);
				}
			},
			todaoru() {
				this.dialogdaochu = true;
			},
			tosendOA() {

				console.log(this.selectData)
				if (this.selectData.length == 0) {
					this.$message({
						message: '请选择需要提交到OA的物料主数据',
						type: 'warning',
						center: true
					});
				} else {
					this.$confirm('当前数据是否提交到OA？', '提示', {
						confirmButtonText: '确定',
						cancelButtonText: '取消',
						type: 'warning'
					}).then(() => {
						this.$message({
							type: 'success',
							message: '提交OA成功!'
						});
				}).catch(() => {
						this.$message({
							type: 'info',
							message: '已取消删除'
						});
				});
				}
			},

			// 删除数据
			todel() {
				console.log(this.selectData)
				if (this.selectData.length == 0) {
					this.$message({
						message: '请选择需要删除的物料主数据',
						type: 'warning',
						center: true
					});
				} else {
					this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {
						confirmButtonText: '确定',
						cancelButtonText: '取消',
						type: 'warning'
					}).then(() => {
						axios.put(this.deletWLurl, this.selectData).then(response=> {
							if(response.data.code==null||response.data.code!=0){
						this.$message.error('删除失败');
						this.$data.loading = false;
					}else{
						this.$message({
							message: '删除成功',
							type: 'success',
							center: true
						});
						this.$data.loading = false;
						this.queryMaterial(this.queryResult.currPage);
					}
				}).catch(function (error) {
						this.$message.error('删除失败，请联系系统管理员');
					});
				}).catch(() => {
						this.$message({
							type: 'info',
							message: '已取消删除',
							center: true
						});
				});
				}



			},
			tolook() {

				// console.log(this.selectData)
				if (this.selectData.length == 1) {
					this.$message.error('暂无开放')
					// this.$message.error('暂无开放')
				} else if (this.selectData.length == 0) {
					// this.$message({
					// 	message: '请选择需要查看的物料主数据',
					// 	type: 'warning',
					// 	center: true
					// });
				} else {
					this.$message({
						message: '请选择一行数据进行查看',
						type: 'warning',
						center: true
					});
				}
			},
			toedit() {
				console.log(this.selectData)
				if (this.selectData.length == 1) {
					window.open(`${this.editWLurl}?id=${this.selectData[0].id}`,'_self')
				}else if (this.selectData.length == 0) {
					this.$message({
						message: '请选择需要编辑的物料主数据',
						type: 'warning',
						center: true
					});
				} else {
					this.$message({
						message: '请选择一行数据进行编辑',
						type: 'warning',
						center: true
					});
				}
			},
			tocopy() {
				console.log(this.selectData)
				if (this.selectData.length == 1) {
					window.open(`${this.copyWLurl}?id=${this.selectData[0].id}`,'_self')




				}else if (this.selectData.length == 0) {
					this.$message({
						message: '请选择需要复制的物料主数据',
						type: 'warning',
						center: true
					});
				} else {
					this.$message({
						message: '请选择一行数据进行复制',
						type: 'warning',
						center: true
					});
				}


			},
			tosearch() {

				this.ctrshowtankuang = false;
				// this.ctrshow_peizhi = '0';
				this.ctrshow_search = false;
				this.ctrshow = false;
				this.valuesearch = '0';
				this.queryResult.currPage=1;
				this.queryResult.pageSize=20;
				this.queryMaterial();
			},

			handleEdit(index, row) {
				console.log(row)
				this.dialogVisible = true;
				this.dialogImageUrl = row.checkPictureList;

			},
			handleSelectionChange(data) {
				console.log(data)
				this.selectData = data;
				//
			}, // 多选高亮选中行
			rowClass({
						 row,
						 rowIndex
					 }) {
				if (this.selectRow.includes(rowIndex)) {
					return {
						"background-address": "rgba(253, 247, 229, 1)"
					}
				}
			},
			onpeizhi(item) {

				//						this.item=true;
				console.log(this.ctrpeizhi.ct_region)
				//						console.log(this.item)
			},
			//					点击配置按钮
			changepeizhi() {
				this.ctrshowtankuang = true;
				this.ctrshow_peizhi = '1';
				this.ctrshow_search = false;
				console.log(this.ctrshow_peizhi)

			},

			//点击弹框的灰色区域
			onctrshow() {
				if (window.event.target.className == 'tanpeizhi') {
					this.ctrshowtankuang = false;
					this.ctrshow_peizhi = false;
					this.ctrshow_search = false;
				}

			},
			onpeizhiwancheng() {
				this.ctrshowtankuang = false;
				this.ctrshow_peizhi = false;
				this.ctrshow_search = false;
				localStorage.setItem('zhushuju_peizhi', JSON.stringify(this.ctrpeizhi));
				this.$message.success('保存配置成功')
			},
			//					点击搜索按钮
			inchange(scope) {
				this.ctrshowtankuang = true;
				this.ctrshow_search = '1';
				this.ctrshow_peizhi = false;

			},
			// 更改当前页数
			handleCurrentChange(val) {
				this.queryResult.currPage=val;
				this.queryMaterial();
			},
			// 更改每页显示数量
			handleSizeChange(val){
				this.queryResult.pageSize = val;
				this.queryMaterial();
			},

			// 勾选当前行
			handleRowClick(row, column, event) {

				if (window.event.target.className != 'imgboxitem') {
					this.$refs.multipleTable.toggleRowSelection(row);
				}
			},
			closeDialog() {
				this.dialogImageUrl = [];
			},
			fangdaimgbox() {
				this.fullscreen = true;
			},
			toadd(){
				window.open('Shop2GCEdit','_self')
			},
			resetForm(formName) {
				// console.log(formName)
				this.$refs[formName].resetFields();
			},
			togoedit(row){
				window.open(`${this.editWLurl}?id=${row.id}`,'_self')
			}
		}
	})
	/*]]>*/
</script>

</body>

</html>