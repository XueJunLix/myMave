<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<!-- include 公共head -->
<head th:include="common/common_head :: commonHeader('唯一码主数据')"></head>

<body>
<div id="app" class="container-fluid" style="display: none;" v-loading="loading" :element-loading-text="loadText" v-show="isLoad">
<el-tabs type="border-card" v-on:tab-click="changeTab">
  <el-tab-pane>
    <span slot="label"><i class="fa fa-cogs" aria-hidden="true"></i> 唯一码主数据</span>

<nav class="navbar navbar-search">
   <el-tooltip :content="expandText" placement="top">
	   <el-switch v-model="expandCondition"></el-switch>
	</el-tooltip>
	
	<el-popover
  width="200"
  trigger="click">
  <div class="visibleColumns">
  <ul>
    <li><el-switch v-model="visibleColumns.createTime" inactive-text="创建时间"></el-switch></li>  
    <li><el-switch v-model="visibleColumns.createByName" inactive-text="创建者"></el-switch></li>  
    <li><el-switch v-model="visibleColumns.modifyTime" inactive-text="修改时间"></el-switch></li>  
    <li><el-switch v-model="visibleColumns.modifyByName" inactive-text="修改者"></el-switch></li></ul>  
  </div>
  <el-tag size="mini" slot="reference">列 显示 / 隐藏</el-tag>
</el-popover>
</nav>

<Drawer  title="查询面板" v-model="expandCondition" width="50%">
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">年份</div>
	  <el-date-picker v-model="queryCondition.year" type="year" value-format="yyyy" placeholder="选择年份" style="width: 100%;"></el-date-picker>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">季节</div>
	  <el-select  v-model="queryCondition.season"  placeholder="请选择季节"   
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in seasonItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">月份</div>
	  <el-select  v-model="queryCondition.month"  placeholder="请选择月份" :multiple="true"   
								   align="left"  size="small" :clearable="true"  style="width: 100%;">
								   	<el-option v-for="(item,index) in monthItems" :key="index" align="left" 
								          :label="item" :value="item"></el-option>
				</el-select>
	  </el-col>
	</el-row>
	<el-row>

	  <el-col :span="8">
	  <div class="ur-stack-label">品牌</div>
	  <el-select  v-model="queryCondition.brand"  placeholder="请选择品牌"   
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in brandItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	 <el-col :span="8">
	  <div class="ur-stack-label">系列</div>
	   <el-select  v-model="queryCondition.serial"  placeholder="请选择系列"   
							   align="left"  size="small" :clearable="true" v-on:change="changeSerial"  style="width: 100%;">
							   	<el-option v-for="(item,key) in serialItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">原系列</div>
	  <el-select  v-model="queryCondition.originalSerial"  placeholder="请选择原系列"   
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in serialItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="12">
	  <div class="ur-stack-label">风格</div>
	   <el-select  v-model="queryCondition.style"  placeholder="请选择风格"   
							   align="left"  size="small" :clearable="true"  :multiple="true" style="width: 100%;">
							   	<el-option v-for="(item,index) in styleItems" :key="index" align="left"
							          :label="item.svalue" :value="item.skey"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="12">
	  <div class="ur-stack-label">商品层</div>
	  <el-select  v-model="queryCondition.goodsLevel"  placeholder="请选择商品层"    :multiple="true"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in goodsLevelItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
     <el-col :span="8">
	  <div class="ur-stack-label">品类</div>
	  <el-select  v-model="queryCondition.category"  placeholder="请选择品类"  :multiple="true" v-on:change="changeCategory" 
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,key) in categoryItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">中品类</div>
	  <el-select  v-model="queryCondition.subCategory"  placeholder="请选择品类"  :multiple="true"
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,index)  in subCategoryItems" :key="index" align="left"
							          :label="item.svalue" :value="item.skey"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">单号</div>
	  <el-select  v-model="queryCondition.orderNo"  placeholder="请选择单号"    :multiple="true"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in orderNoItems" :key="key" align="left"
							          :label="key" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">类别</div>
	  <el-select  v-model="queryCondition.cytype"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in cytypeItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">订单属性</div>
	  <el-select  v-model="queryCondition.orderType"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in orderTypeItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">下单方式</div>
	  <el-select  v-model="queryCondition.orderModel"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in orderModelItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">是否删除</div>
	  <el-select  v-model="queryCondition.deleted"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in isOrNotItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">是否审核</div>
	  <el-select  v-model="queryCondition.isAudit"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in isOrNotItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">陈列类型</div>
	  <el-select  v-model="queryCondition.displayGenre"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in displayGenreItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">模块等级</div>
	  <el-input v-model="queryCondition.moduleLevel" placeholder="模块等级" style="width: 100%;"></el-input>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">模块号</div>
	  <el-input v-model="queryCondition.moduleNum" placeholder="模块号" style="width: 100%;"></el-input>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">品类买手</div>
	  <el-input v-model="queryCondition.categoryBuyer" placeholder="品类买手" style="width: 100%;"></el-input>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">南北款</div>
	  <el-select  v-model="queryCondition.southNorthGenre"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in southNorthGenreItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">企划款号发布状态</div>
	  <el-select  v-model="queryCondition.status"  placeholder="请选择发布状态"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in planModelNoStatusItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">唯一码发布状态</div>
	  <el-select  v-model="queryCondition.codeStatus"  placeholder="请选择发布状态"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in planModelNoStatusItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="12">
	  <div class="ur-stack-label">企划款号</div>
	  <el-input v-model="queryCondition.planModelNo" placeholder="包含企划款号" style="width: 100%;"></el-input>
	  </el-col>
	  <el-col :span="12">
	  <div class="ur-stack-label">唯一码</div>
	  <el-input v-model="queryCondition.uniqueCode" placeholder="包含唯一码" style="width: 100%;"></el-input>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="12">
	  <div class="ur-stack-label">设计号</div>
	  <el-input v-model="queryCondition.designNo" placeholder="包含设计号" style="width: 100%;"></el-input>
	  </el-col>
	  <el-col :span="12">
	  <div class="ur-stack-label">商品编码</div>
	  <el-input v-model="queryCondition.goodsNo" placeholder="商品编码" style="width: 100%;"></el-input>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">色号</div>
	  <el-select  v-model="queryCondition.colorNo"  placeholder="请选择色号" 
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in colorNoItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">指定款</div>
	  <el-select  v-model="queryCondition.specifyType"  placeholder="请选择"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in specifyTypeItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<div class="search-panel-btn">
		<el-button v-on:click="clickSearchBtn"><i class="fa fa-search" aria-hidden="true" style="padding-right:5px"></i>查询</el-button>
		<el-button v-on:click="clickResetBtn"><i class="fa fa-eraser" aria-hidden="true" style="padding-right:5px"></i>重置</el-button>   	
	</div>
</Drawer>
<div class="clearfix" style="margin-bottom: 5px;"></div>

  <div class="row" >
	<div class="col-md-12">
    
<nav class="navbar">

    <ul class="nav">
      <li>
      	<!-- <el-button v-on:click="clickImportBtn"><i class="fa fa-upload" aria-hidden="true" style="padding-right:5px"></i>导入</el-button>
        <el-button v-on:click="clickDeleteBtn"><i class="fa fa-trash" aria-hidden="true" style="padding-right:5px"></i>删除</el-button> -->
        <el-button v-on:click="clickExportBtn"><i class="fa fa-download" aria-hidden="true" style="padding-right:5px"></i>导出</el-button>
      	<el-button v-on:click="clickSubmitVersionBtn"><i class="fa fa-level-up" aria-hidden="true" style="padding-right:5px"></i>版本确认</el-button>
        <el-dropdown>
			<el-button>
			企划校验<i class="el-icon-arrow-down el-icon--right"></i>
			</el-button>
			<el-dropdown-menu slot="dropdown">
			    <el-dropdown-item v-on:click.native="clickImportBtn('planCheck')" divided="true">导入</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickDeleteBtn" divided="true">删除</el-dropdown-item>
			</el-dropdown-menu>
		</el-dropdown>
        <el-dropdown>
			<el-button>
			 不对接PLM<i class="el-icon-arrow-down el-icon--right"></i>
			</el-button>
			<el-dropdown-menu slot="dropdown">
			    <el-dropdown-item v-on:click.native="clickAddDesignNoBtn" divided="true">唯一码设计号对应</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickNoPushPlmAddBtn" divided="true">新增唯一码</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickNoPushPlmUpdateBtn" divided="true">编辑唯一码</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickImportBtn('noPushPlm')" divided="true">导入</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickDeleteByUniqueCodeBtn" divided="true">删除唯一码</el-dropdown-item>
			</el-dropdown-menu>
		</el-dropdown>
		<el-dropdown>
			<el-button>
			 对接PLM<i class="el-icon-arrow-down el-icon--right"></i>
			</el-button>
			<el-dropdown-menu slot="dropdown">
			    <el-dropdown-item v-on:click.native="clickPushPlmAddBtn" divided="true">新增唯一码</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickPushPlmUpdateBtn" divided="true">编辑唯一码</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickEditPlanModelNoBtn" divided="true">编辑企划款号</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickImportBtn('pushPlm')" divided="true">导入</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickPushPlmBtn('realTimePush')" divided="true">实时发布</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickPushPlmBtn('delayedPush')" divided="true">延时发布</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickCanclePushPlmBtn('isPush')" divided="true">取消款(已发布)</el-dropdown-item>
			    <el-dropdown-item v-on:click.native="clickCanclePushPlmBtn('unPush')" divided="true">删除款(未发布)</el-dropdown-item>
			    
			    
			</el-dropdown-menu>
		</el-dropdown>
<el-button v-on:click="clickDepAuditBtn">审核</el-button>
      </li>
    </ul>
    
    
    <el-dialog :title="confirmTitle"  :visible.sync="confirmDialogVisible"  width="40%">
	  <span>{{confirmDesc}}确定要操作这  {{multipleSelection.length}} 项吗?</span>
	  <span slot="footer" class="dialog-footer">
	    <el-button v-on:click="confirmDialogVisible = false">取 消</el-button>
	    <el-button type="primary" v-on:click="confirmSummitBtn">确 定</el-button>
	  </span>
	</el-dialog>
    
    <el-dialog :title="uploadTitle" ref="uploadPanel" :visible.sync="uploadDialogVisible" >
		 <a :href="uploadTemplateUrl" style="font-size: 15px; color: red;">模版下载</a>
		  <!-- <div style="margin-top: 10px; margin-left: -5px; color: #000;">
			 	“导入”功能是新增导入的数据，不会覆盖已有数据；故导入前，请先删除原有数据。</div> -->
			    <div style="height: 50px;"></div>
         		<el-form style="width: 30rem;"
         		  class="form uploadform">
	         		 <el-form-item>
		         		<el-upload  ref="upload"  :action="uploadAction" 
		         		 	:before-upload="beforeUpload" :limit="1"
			         		:file-list="fileList"  :auto-upload='true' :show-upload-list="false" 
			         		:on-success="handleUploadSuccess"
			         		:on-error="handleUploadError">
			                <el-button slot="trigger"  type="primary">点击上传</el-button>
			           		<div slot="tip" class="el-upload__tip">只能上传xls/xlsx 文件,每次只能上传一个</div>
		            	</el-upload>
	            	</el-form-item>
            	</el-form>
	</el-dialog>
    
		<el-pagination :page-size="20" :total="queryResult.totalRecordNum" :current-page="queryResult.currPage" v-on:current-change="handleCurrentChange" v-on:size-change="handleSizeChange" :pager-count="3" layout="total, sizes, prev, pager, next">
		</el-pagination>
</nav>

        <el-table id="data_table" stripe="" :data="this.queryResult.data" :border="true" :highlight-current-row="true" 
        :height="this.tableHeight"  ref="multipleTable" v-on:row-click="handleRowClick"
        v-on:current-change="handleTableCurrentChange" v-on:selection-change="handleSelectionChange">
          <el-table-column fixed="left" type="selection"  width="45"></el-table-column>
          <el-table-column property="brandName" label="品牌" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="year" label="年" min-width="60" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="seasonName" label="季节" min-width="60" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="month" label="月" min-width="60" :show-overflow-tooltip="true"></el-table-column>          
          <el-table-column property="orderNo" label="单号" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="marketingDate" label="上市日期" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="cytypeName" label="类别" min-width="80" :show-overflow-tooltip="true"></el-table-column>
		  
          <el-table-column property="serialName" label="系列" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="originalSerialName" label="原系列" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="styleName" label="风格" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="goodsLevelName" label="商品层" min-width="70" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="categoryName" label="品类" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="subCategoryName" label="中品类" min-width="80" :show-overflow-tooltip="true"></el-table-column>  
		  <el-table-column property="orderTypeName" label="订单属性" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="uniqueCode" label="唯一码" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="planModelNo" label="企划款号" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="originalDesignNo" label="原设计号" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="designNo" label="设计号" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="goodsNo" label="商品编码" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="colorNoName" label="色号" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="displayGenreName" label="陈列类型" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="specifyTypeName" label="指定款" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="moduleLevel" label="模块等级" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="moduleNum" label="模块号" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="price" label="单价" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="planCost" label="企划成本" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="shopTotalDepth" label="SKU总深度" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="intDepth" label="取整深度" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="orderTotalDepth" label="下单总数" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="colorOrderDepth" label="色号深度" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          
          <el-table-column property="isInPlanName" label="是否企划内" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="fabricPropertyName" label="面料特性" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="southNorthGenreName" label="南北款" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="abGenreName" label="AB款" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="remark" label="备注" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="orderModelName" label="下单方式" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="processingModeName" label="加工方式" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="categoryBuyerName" label="品类买手" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          
          <el-table-column property="deletedName" label="是否删除" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="deletedReason" label="取消原因" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="statusName" label="企划款号状态" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="codeStatusName" label="唯一码状态" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="pushResult" label="发布结果" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="isAuditName" label="是否审核" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="auditName" label="审核人" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="isReverseAuditName" label="是否反审" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="reverseAuditName" label="反审人" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          
          <el-table-column v-if="visibleColumns.createTime" property="createTime" label="创建时间" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column v-if="visibleColumns.createByName" property="createByName" label="创建者" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column v-if="visibleColumns.modifyTime" property="modifyTime" label="修改时间" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column v-if="visibleColumns.modifyByName" property="modifyByName" label="修改者" min-width="120" :show-overflow-tooltip="true"></el-table-column>
        </el-table>
	</div>
	
</div>

  </el-tab-pane>
  
  <el-tab-pane>
  <span slot="label"><i class="fa fa-table" aria-hidden="true"></i> 检核数据</span>

<nav class="navbar navbar-search">
   <el-tooltip :content="expandText" placement="top">
	   <el-switch v-model="expandCondition1"></el-switch>
	</el-tooltip>
</nav>

<Drawer  title="查询面板" v-model="expandCondition1" width="50%">
	<el-row>
	  <el-col :span="8">
	  <div class="ur-stack-label">年份</div>
	  <el-date-picker v-model="queryCondition1.year" type="year" value-format="yyyy" placeholder="选择年份" style="width: 100%;"></el-date-picker>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">季节</div>
	  <el-select  v-model="queryCondition1.season"  placeholder="请选择季节"   
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in seasonItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">月份</div>
	  <el-select  v-model="queryCondition1.month"  placeholder="请选择月份"   
								   align="left"  size="small" :clearable="true"  style="width: 100%;">
								   	<el-option v-for="(item,index) in monthItems" :key="index" align="left" 
								          :label="item" :value="item"></el-option>
				</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="24">
	  <div class="ur-stack-label">店铺</div>
	   <el-select  v-model="queryCondition1.rangeValue"  placeholder="请选择店铺"   filterable="true" :multiple="true"
								   align="left"  size="small" :clearable="true"  style="width: 100%;">
								   	<el-option v-for="(item,key) in shopItems" :key="key" align="left" 
								           :label="item" :value="key"></el-option>
				</el-select>
	  </el-col>
	</el-row>
	<el-row>

	  <el-col :span="8">
	  <div class="ur-stack-label">品牌</div>
	  <el-select  v-model="queryCondition1.brand"  placeholder="请选择品牌"   
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in brandItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	 <el-col :span="8">
	  <div class="ur-stack-label">系列</div>
	   <el-select  v-model="queryCondition1.serial"  placeholder="请选择系列"   filterable="true"
							   align="left"  size="small" :clearable="true" v-on:change="changeSerial"  style="width: 100%;">
							   	<el-option v-for="(item,key) in serialItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="8">
	  <div class="ur-stack-label">原系列</div>
	  <el-select  v-model="queryCondition1.originalSerial"  placeholder="请选择原系列"   filterable="true"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in serialItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
	  <el-col :span="12">
	  <div class="ur-stack-label">风格</div>
	   <el-select  v-model="queryCondition1.style"  placeholder="请选择风格"   filterable="true"
							   align="left"  size="small" :clearable="true"  :multiple="true" style="width: 100%;">
							   	<el-option v-for="(item,index) in styleItems1" :key="index" align="left"
							          :label="item.svalue" :value="item.skey"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="12">
	  <div class="ur-stack-label">商品层</div>
	  <el-select  v-model="queryCondition1.goodsLevel"  placeholder="请选择商品层"    :multiple="true" filterable="true"
							   align="left"  size="small" :clearable="true"  style="width: 100%;">
							   	<el-option v-for="(item,key) in goodsLevelItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	<el-row>
     <el-col :span="12">
	  <div class="ur-stack-label">品类</div>
	  <el-select  v-model="queryCondition1.category"  placeholder="请选择品类"  :multiple="true" v-on:change="changeCategory" filterable="true"
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,key) in categoryItems" :key="key" align="left" 
							          :label="item" :value="key"></el-option>
			</el-select>
	  </el-col>
	  <el-col :span="12">
	  <div class="ur-stack-label">中品类</div>
	  <el-select  v-model="queryCondition1.subCategory"  placeholder="请选择品类"  :multiple="true" filterable="true"
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,index)  in subCategoryItems1" :key="index" align="left"
							          :label="item.svalue" :value="item.skey"></el-option>
			</el-select>
	  </el-col>
	</el-row>
	 <div class="search-panel-btn">
		<el-button v-on:click="clickSearchBtn"><i class="fa fa-search" aria-hidden="true" style="padding-right:5px"></i>查询</el-button>
		<el-button v-on:click="clickResetBtn"><i class="fa fa-eraser" aria-hidden="true" style="padding-right:5px"></i>重置</el-button>   	
	</div>
</Drawer>
<div class="clearfix" style="margin-bottom: 5px;"></div>

  <div class="row" >
	<div class="col-md-12">
<nav class="navbar">

    <ul class="nav">
      <li>
        <el-button v-on:click="clickCalculateBtn"><i class="fa fa-calculator" aria-hidden="true" style="padding-right:5px"></i>生成检核数据</el-button>
        <el-button v-on:click="clickExportBtn()"><i class="fa fa-download" aria-hidden="true" style="padding-right:5px"></i>导出</el-button>
     </li>
    </ul>
		<el-pagination :page-size="20" :total="queryResult1.totalRecordNum" :current-page="queryResult1.currPage" v-on:current-change="handleCurrentChange" v-on:size-change="handleSizeChange" layout="total, sizes, prev, pager, next, jumper">
		</el-pagination>
</nav>

        <el-table id="data_table" stripe="" :data="this.queryResult1.data" :border="true" :highlight-current-row="true" :height="this.tableHeight">          
          <el-table-column fixed="left" property="year" label="年" min-width="60" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column fixed="left" property="seasonName" label="季节" min-width="60" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column fixed="left" property="month" label="月" min-width="60" :show-overflow-tooltip="true"></el-table-column>                    
          <el-table-column fixed="left" property="rangeValueName" label="店铺" min-width="200" :show-overflow-tooltip="true"></el-table-column>          
          <el-table-column fixed="left" property="referShopName" label="企划参考店铺" min-width="150" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="goodsAreaName" label="商品分区" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="planLevelName" label="企划等级" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="brandName" label="品牌" min-width="120" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="serialName" label="系列" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="originalSerialName" label="原系列" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="styleName" label="风格" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="goodsLevelName" label="商品层" min-width="70" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="categoryName" label="品类" min-width="80" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="subCategoryName" label="中品类" min-width="80" :show-overflow-tooltip="true"></el-table-column>   
          <el-table-column v-for="(item, index) in this.checkValueColumns" v-if="item.display" :label="item.valueFieldName" min-width="120" :show-overflow-tooltip="true">
          <template scope="scope">
          {{getValueFieldData1(item.valueField,scope.row)}} 
          </template>
          </el-table-column>
          <el-table-column property="createTime" label="创建时间" min-width="150" :show-overflow-tooltip="true"></el-table-column>
          <el-table-column property="createByName" label="创建者" min-width="120" :show-overflow-tooltip="true"></el-table-column>
        </el-table>

	</div>
</div>


  </el-tab-pane>
 
</el-tabs>


<!-- 版本确认  begin -->
	<el-dialog title="版本确认"  :visible.sync="showSubmitVersionDialog" :close-on-click-modal="false">
	  <el-form :inline="true" label-position="right" v-loading="submitVersionData" :element-loading-text="taskResult.message">	  
		  <el-form-item label="年份" label-width="70px">
		     <el-date-picker v-model="submitVersionCondition.year" v-on:change="changeVersion" size="small" type="year" value-format="yyyy" placeholder="选择年份" style="width: 100%;" ></el-date-picker>
		  </el-form-item>
		  <el-form-item label="月份" label-width="70px">
		  <el-select  v-model="submitVersionCondition.month"  placeholder="请选择月份" v-on:change="changeVersion"   
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,index) in monthItems" :key="index" align="left" 
							          :label="item" :value="item"></el-option>
			</el-select>
		  </el-form-item>
		  <el-form-item label="系列" label-width="70px">
			  <el-select  v-model="submitVersionCondition.serial" v-on:change="changeVersion" style="width: 100%;"
								   align="left"  size="small" :clearable="true">
								   	<el-option v-for="(item,key) in serialItems" align="left"  
								          :label="item" :value="key"></el-option>
			  </el-select>
		  </el-form-item>
	  </el-form>
	  <div v-if="submitVersionData===true" style="padding-top: 20px;">
	  <el-progress :text-inside="true" :stroke-width="20" :percentage="taskResult.percentage" :status="taskResult.progressStatus"></el-progress>
	  </div>
	  <span slot="footer" class="dialog-footer">
	    <el-button type="primary" v-on:click="submitVersion('newVersion')" :disabled="newVersionDisabledSubmit" >生成新版本{{newVersionNo}}</el-button>
	    <el-button type="primary" v-on:click="submitVersion('lastVersion')" :disabled="lastVersionDisabledSubmit">沿用上次提交的版本{{lastVersionNo}}</el-button>
	    <el-button v-on:click="showSubmitVersionDialog = false" :disabled="submitVersionData">关闭</el-button>
	  </span>
	</el-dialog>
<!-- 版本确认  end-->

<!-- 取消款  begin -->
    <el-dialog :title="canclePushPlmTitle"  :visible.sync="canclePushPlmDialogVisible" v-loading="canclePushPlmData" :lock-scroll="false" size="large"> 
		<el-form :inline="true" label-position="right" :model="canclePushPlmInstance" label-suffix=":">
	      <el-form-item label="企划款号" label-width="80px">
			<el-input type="textarea" :rows="2" placeholder="请输入内容" v-model="canclePushPlmInstance.planModelNo"></el-input>
		  </el-form-item>
		  <el-form-item label="唯一码" label-width="80px">
			<el-input type="textarea" :rows="2" placeholder="请输入内容" v-model="canclePushPlmInstance.uniqueCode"></el-input>
		  </el-form-item>
		  <el-form-item label="取消原因" label-width="80px">
			<el-input type="textarea" :rows="2" placeholder="请输入取消/删除原因" v-model="canclePushPlmInstance.deletedReason"></el-input>
		  </el-form-item>
		</el-form>
	    <span slot="footer" class="dialog-footer">
	      <el-button v-on:click="clickSaveCanclePushPlmBtn"><i class="fa fa-save" aria-hidden="true" style="padding-right:5px"></i>保存</el-button>
	      <el-button v-on:click="clickCancelCancelPushPlmBtn"><i class="fa fa-eraser" aria-hidden="true" style="padding-right:5px"></i>取消</el-button>
	    </span>
	</el-dialog>
<!-- 取消款  end-->

<!-- 按唯一码删除数据  begin -->
    <el-dialog title="按唯一码删除数据"  :visible.sync="deleteByUniqueCodeDialogVisible" v-loading="deleteUniqueCodeData" :lock-scroll="false" size="large"> 
		<el-form :inline="true" label-position="right" :model="deleteUniqueCodeInstance" label-suffix=":">
	      <el-form-item label="唯一码" label-width="80px">
			<el-input type="textarea" :rows="2" placeholder="请输入内容" v-model="deleteUniqueCodeInstance.uniqueCode"></el-input>
		  </el-form-item>
		  <el-form-item label="取消原因" label-width="80px">
			<el-input type="textarea" :rows="2" placeholder="请输入取消原因" v-model="deleteUniqueCodeInstance.deletedReason"></el-input>
		  </el-form-item>
		</el-form>
	    <span slot="footer" class="dialog-footer">
	      <el-button v-on:click="clickSaveDeleteUniqueCodeBtn"><i class="fa fa-save" aria-hidden="true" style="padding-right:5px"></i>保存</el-button>
	      <el-button v-on:click="clickCancelDeleteByUniqueCodeBtn"><i class="fa fa-eraser" aria-hidden="true" style="padding-right:5px"></i>取消</el-button>
	    </span>
	</el-dialog>
<!-- 按唯一码删除数据  end-->


<!-- 生成检核数据  begin -->
	<el-dialog title="生成检核数据"  :visible.sync="showCalculateDialog" :close-on-click-modal="false">
	  <el-form :inline="true" label-position="right" v-loading="calculateData" :element-loading-text="taskResult.message">	  
		  <el-form-item label="年份" label-width="70px">
		     <el-date-picker v-model="calculateCondition.year" size="small" type="year" value-format="yyyy" placeholder="选择年份" style="width: 100%;"></el-date-picker>
		  </el-form-item>
		  <el-form-item label="季节" label-width="70px">
		   <el-select  v-model="calculateCondition.season"  placeholder="请选择季节"   
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,key) in seasonItems" :key="key" align="left"
							          :label="item" :value="key"></el-option>
			</el-select>
		  </el-form-item>
		  <el-form-item label="月份" label-width="70px">
		  <el-select  v-model="calculateCondition.month"  placeholder="请选择月份"   
							   align="left"  size="small" :clearable="true" style="width: 100%;">
							   	<el-option v-for="(item,index) in monthItems" :key="index" align="left" 
							          :label="item" :value="item"></el-option>
			</el-select>
		  </el-form-item>
	  </el-form>
	  <div v-if="calculateData===true" style="padding-top: 20px;">
	  <el-progress :text-inside="true" :stroke-width="20" :percentage="taskResult.percentage" :status="taskResult.progressStatus"></el-progress>
	  </div>
	  <span slot="footer" class="dialog-footer">
	    <el-button v-on:click="showCalculateDialog = false" :disabled="calculateData">关闭</el-button>
	    <el-button type="primary" v-on:click="calculate" :disabled="calculateData">生成检核数据</el-button>
	  </span>
	</el-dialog>
<!-- 生成检核数据  end-->
</div>
</body>

<!-- include 公共js库 -->
<div th:include="common/onload_js :: onloadJS"></div>

   <script  th:inline="javascript">
  /*<![CDATA[*/
	let this_let; 
    var vm = new Vue({
      el: '#app',
      data: function() {
        return {   
          queryCondition:{
        	  year:"",
        	  season:"",
        	  month:[],
        	  brand:"",
        	  serial:"",
        	  originalSerial:"",
        	  style:[],
        	  goodsLevel:[],
        	  category:[],
        	  subCategory:[],
        	  planModelNo:"",
        	  uniqueCode:"",
        	  status: "",
        	  codeStatus: "",
        	  designNo: "",
        	  colorNo: "",
        	  deleted: "",
        	  isAudit: "",
        	  cytype: "",
        	  orderType: "",
        	  orderModel: "",
        	  orderNo: [],
        	  displayGenre: "",
        	  specifyType: "",
        	  moduleLevel: "",
        	  moduleNum: "",
        	  categoryBuyer: "",
        	  southNorthGenre: "",
        	  goodsNo: "",
          },
          queryResult:{
        	  totalRecordNum:0,
        	  currPage:1,
        	  pageSize:20
          },
          expandText:"展开查询面板",
          expandCondition:false,
          tableHeight:500,
          monthItems:[1,2,3,4,5,6,7,8,9,10,11,12],
          seasonItems:[[${seasonItems}]],
          serialItems:[[${serialItems}]],
          allStyleItems:[[${styleItems}]],
          styleItems:[],
          styleItems1:[],
          goodsLevelItems:[[${goodsLevelItems}]],
          categoryItems:[[${categoryItems}]],
          allSubCategoryItems:[[${subCategoryItems}]],
          subCategoryItems:[],
          subCategoryItems1:[], 
          brandItems:[[${brandItems}]],
          shopItems: [[${shopItems}]],
          checkValueColumns:[[${checkValueColumns}]],
          planModelNoStatusItems:[[${planModelNoStatusItems}]],
          colorNoItems:[[${colorNoItems}]],
          isOrNotItems:[[${isOrNotItems}]],
          cytypeItems:[[${cytypeItems}]],
          orderTypeItems:[[${orderTypeItems}]],
          orderModelItems:[[${orderModelItems}]],
          orderNoItems:[[${orderNoItems}]],
          displayGenreItems:[[${displayGenreItems}]],
          specifyTypeItems:[[${specifyTypeItems}]],
          southNorthGenreItems:[[${southNorthGenreItems}]],

          loading:false,
          loadText:"查询数据中。。。",
          uploadDialogVisible: false,
          uploadTitle: "企划校验过程中，导入唯一码",
          uploadTemplateUrl: "/template/UniqueCodeMasterDataTemplate.xlsx",
          uploadAction: "/UniqueCodeMasterData/importExcel",
          fileList:[],
          importing:false,
          visibleColumns:{
        	  createTime: false,
        	  createByName: false,
        	  modifyTime: false,
        	  modifyByName: false,
          },

          showSubmitVersionDialog: false,
          submitVersionData: false,
          submitVersionCondition:{
        	  dataType:"uniqueCode",
        	  year:"",
        	  season:"",
        	  month:"",
        	  serial:"",
        	  versionNo:"",
          },
          lastVersionNo: "",
          newVersionNo: "1.0",
          lastVersionDisabledSubmit: true,
          newVersionDisabledSubmit: true,
          
          taskResult:{
        	  status:"",
        	  message:"",
              percentage:0,
              progressStatus:""
          },
          /* exportCondition:{
        	  year:"",
        	  season:"",
        	  month:"",
        	  serial:"",
  	      }, */
          /* showExportDialog: false, */
          
          activeTabIndex:0,
          showCalculateDialog: false,
          calculateData: false,
          calculateCondition:{
        	  year:"",
        	  season:"",
        	  month:"",
          },
          expandCondition1: false,
          queryCondition1:{
        	  year:"",
        	  season:"",
        	  month:"",
        	  rangeType:"",
        	  rangeValue:[],
        	  brand:"",
        	  serial:"",
        	  originalSerial:"",
        	  style:[],
        	  goodsLevel:[],
        	  category:[],
        	  subCategory:[],
          },
          queryResult1:{
        	  totalRecordNum:0,
        	  currPage:1,
        	  pageSize:20
          },

          multipleSelection: [],
          
          confirmDialogVisible: false,
          confirmTitle: "确认提示",
          confirmRequest: "realTimePush",
          confirmDesc: "",
          
          canclePushPlmTitle:"",
          canclePushPlmSaveUrl:"",
          canclePushPlmInstance: {
        	  planModelNo: "",
        	  uniqueCode: "",
        	  deletedReason: "",
          },
          canclePushPlmDialogVisible: false,
          canclePushPlmData: false,
          
          deleteByUniqueCodeDialogVisible:false,
          deleteUniqueCodeData: false,
          deleteUniqueCodeInstance: {
        	  uniqueCode: "",
        	  deletedReason: "",
          },
          
          
        }
      },
      mounted: function(){
    	  
      },
      created: function() {
    	  this.isLoad = true;
    	  this_let = this;
    	  this.queryCondition.year=new Date();
      },
      methods: {
        //多选
        handleRowClick(val){
        	this.$refs.multipleTable.toggleRowSelection(val);
        },
		handleTableCurrentChange(currentRow) {
			this.currInstance = currentRow;
		},
        handleSelectionChange(val) {
            this.multipleSelection = val;
        },
        
    	handleCurrentChange(val){
    		if(this.activeTabIndex==0){
	    		this.queryResult.currPage = val;
			}else if(this.activeTabIndex==1){
	    		this.queryResult1.currPage = val;
			}
    		this.queryData();
    	},
		handleTableCurrentChange(currentRow) {
    		console.log("handleTableCurrentChange:"+currentRow);
			this.currInstance = currentRow;
		},
    	handleSizeChange(val){
    		if(this.activeTabIndex==0){
        		this.queryResult.pageSize = val;
			}else if(this.activeTabIndex==1){
	    		this.queryResult1.pageSize = val;
			}
    		this.queryData();
    	},
    	clickSearchBtn(){
    		if(this.activeTabIndex==0){
        		this.queryResult.currPage = 1;
			}else if(this.activeTabIndex==1){
	    		//this.queryResult1.currPage = 1;
			}
    		this.queryData();
    	},
    	changeSerial(){		
    		if(this.activeTabIndex==0){
              	this.styleItems=[];
              	this.queryCondition.style=[];
              	if(this.queryCondition.serial){
              		var serial=this.queryCondition.serial;
              		for(var i=0;i<this.allStyleItems.length;i++){
              			if(this.allStyleItems[i].parentKey===serial){
              				this.styleItems.push(this.allStyleItems[i]);
              			}
              		}
              	}
            }else if(this.activeTabIndex==1){
              	 this.styleItems1=[];
              	this.queryCondition1.style=[];
              	if(this.queryCondition1.serial){
              		var serial=this.queryCondition1.serial;
              		for(var i=0;i<this.allStyleItems.length;i++){
              			if(this.allStyleItems[i].parentKey===serial){
              				this.styleItems1.push(this.allStyleItems[i]);
              			}
              		}
              	} 
            }
        },
        changeCategory(){	
  		  if(this.activeTabIndex==0){
  			this.subCategoryItems=[];
	      	if(this.queryCondition.category){
	      		var category = this.queryCondition.category;
	          	for(var i=0;i<this.allSubCategoryItems.length;i++){
	          		for(var j=0;j<category.length;j++){
	          			if(category[j]===this.allSubCategoryItems[i].parentKey){
	          				this.subCategoryItems.push(this.allSubCategoryItems[i]);
	          			}
	          		}
	          	}	
	      	}
          }else if(this.activeTabIndex==1){
        	 this.subCategoryItems1=[];
	      	if(this.queryCondition1.category){
	      		var category = this.queryCondition1.category;
	          	for(var i=0;i<this.allSubCategoryItems.length;i++){
	          		for(var j=0;j<category.length;j++){
	          			if(category[j]===this.allSubCategoryItems[i].parentKey){
	          				this.subCategoryItems1.push(this.allSubCategoryItems[i]);
	          			}
	          		}
	          	}	
	      	} 
          }
    	  
        },
        queryData() {
          _this = this;
          var url = '/UniqueCodeMasterData/search';
          var restRequest = new URRestRequest();
          if(this.activeTabIndex==0){
        	  url = '/UniqueCodeMasterData/search';
              var page = this.queryResult.currPage;
        	  /* if(!this.queryCondition.year){
        	  	this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
    			return;
      		  } */
        	  /* if(!this.queryCondition.month){
        		this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
    			return;
      		  }
        	  if(!this.queryCondition.season){
          		this.$notify({title: '警告',message: "请选择季节！",offset: 100,type:'warning'});
     			return;
       		  }
        	  if(!this.queryCondition.serial){
            	this.$notify({title: '警告',message: "请选择系列！",offset: 100,type:'warning'});
       			return;
         	  } */

              if(page==null){
            	  page = 1;
              }

              restRequest.setCurrPage(page);
              restRequest.setPageSize(this.queryResult.pageSize);

              //可以指定排序字段
              //restRequest.addOrderBy("columnName??? desc");
			  // 按年份、季节（秋冬、春夏）、系列、原系列、风格、商品层、品类、中品类降序
	          restRequest.addOrderBy("a.year desc");
	          restRequest.addOrderBy("a.season desc");
	          restRequest.addOrderBy("a.month desc");
	          restRequest.addOrderBy("a.serial desc");
	          restRequest.addOrderBy("a.original_serial desc");
	          restRequest.addOrderBy("a.style desc");
	          restRequest.addOrderBy("a.goods_level desc");
	          restRequest.addOrderBy("a.category desc");
	          restRequest.addOrderBy("a.sub_category desc");
	          restRequest.addOrderBy("a.unique_code desc");

    	     //condition参数：字段名、值、运算符(eq,like,in,ne,lt,gt,le,ge)
    	     restRequest.addCondition("a.year",this.queryCondition.year,"eq");
    	     restRequest.addCondition("a.season",this.queryCondition.season,"eq");
    	     restRequest.addCondition("a.month",this.queryCondition.month.join(","),"in");
    	     restRequest.addCondition("a.brand",this.queryCondition.brand,"eq");
    	     restRequest.addCondition("a.serial",this.queryCondition.serial,"eq");
    	     restRequest.addCondition("a.original_serial",this.queryCondition.originalSerial,"eq");
    	     restRequest.addCondition("a.style",this.queryCondition.style.join(","),"in");
    	     restRequest.addCondition("a.goods_level",this.queryCondition.goodsLevel.join(","),"in");
    	     restRequest.addCondition("a.category",this.queryCondition.category.join(","),"in");
    	     restRequest.addCondition("a.sub_category",this.queryCondition.subCategory.join(","),"in");
    	     restRequest.addCondition("a.plan_model_no",this.queryCondition.planModelNo,"like");
    	     restRequest.addCondition("a.unique_code",this.queryCondition.uniqueCode,"like");
    	     restRequest.addCondition("a.status",this.queryCondition.status,"eq");
    	     restRequest.addCondition("a.code_status",this.queryCondition.codeStatus,"eq");
    	     restRequest.addCondition("a.design_no",this.queryCondition.designNo,"like");
    	     restRequest.addCondition("a.color_no",this.queryCondition.colorNo,"eq");
    	     restRequest.addCondition("a.deleted",this.queryCondition.deleted,"eq");
    	     restRequest.addCondition("a.is_audit",this.queryCondition.isAudit,"eq");
    	     restRequest.addCondition("a.cytype",this.queryCondition.cytype,"eq");
    	     restRequest.addCondition("a.order_type",this.queryCondition.orderType,"eq");
    	     restRequest.addCondition("a.order_model",this.queryCondition.orderModel,"eq");
    	     restRequest.addCondition("a.order_no",this.queryCondition.orderNo.join(","),"in");
    	     restRequest.addCondition("a.display_genre",this.queryCondition.displayGenre,"eq");
    	     restRequest.addCondition("a.specify_type",this.queryCondition.specifyType,"eq");
    	     restRequest.addCondition("a.module_level",this.queryCondition.moduleLevel,"eq");
    	     restRequest.addCondition("a.module_num",this.queryCondition.moduleNum,"eq");
    	     restRequest.addCondition("a.category_buyer",this.queryCondition.categoryBuyer,"eq");
    	     restRequest.addCondition("a.south_north_genre",this.queryCondition.southNorthGenre,"eq");
    	     restRequest.addCondition("c.goods_no",this.queryCondition.goodsNo,"eq");

          }else if(this.activeTabIndex==1){
        	  url = '/PlanProcessData/searchUniqueCodeCheck';
              var page = this.queryResult1.currPage;
        	  if(!this.queryCondition1.year){
        	  	this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
    			return;
      		  }
        	  if(!this.queryCondition1.month){
        		this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
    			return;
      		  }

              if(page==null){
            	  page = 1;
              }

              restRequest.setCurrPage(page);
              restRequest.setPageSize(this.queryResult1.pageSize);

        	  
     	     restRequest.addCondition("data_type","unique_code_check","eq");
     	     restRequest.addCondition("year",this.queryCondition1.year,"eq");
     	     restRequest.addCondition("season",this.queryCondition1.season,"eq");
     	     restRequest.addCondition("month",this.queryCondition1.month,"eq");
     	     restRequest.addCondition("range_type",this.queryCondition1.rangeType,"eq");
     	     restRequest.addCondition("range_value",this.queryCondition1.rangeValue.join(","),"in");
     	     restRequest.addCondition("brand",this.queryCondition1.brand,"eq");
     	     restRequest.addCondition("serial",this.queryCondition1.serial,"eq");
     	     restRequest.addCondition("original_serial",this.queryCondition1.originalSerial,"eq");
     	     restRequest.addCondition("style",this.queryCondition1.style.join(","),"in");
     	     restRequest.addCondition("goods_level",this.queryCondition1.goodsLevel.join(","),"in");
     	     restRequest.addCondition("category",this.queryCondition1.category.join(","),"in");
     	     restRequest.addCondition("sub_category",this.queryCondition1.subCategory.join(","),"in");
          }
          
         this.loading = true;
         this.loadText = "查询数据中...";

          axios.post(url,restRequest.getRequestData())
            .then(function (response) {
			    if(response.data.code==null||response.data.code!=0){
			    	if(_this.activeTabIndex==0){
	                    _this.$data.queryResult.data=[];
	                }else if(_this.activeTabIndex==1){
	                    _this.$data.queryResult1.data=[];
	                }
			    	_this.$notify.error({title: '查询数据失败',message: response.data.message,offset: 100});
			    	_this.$data.loading = false;
			    }else{
			    	if(!response.data.data){
			    		_this.$notify({title: '警告',message: "没有满足查询条件的数据！",offset: 100,type:'warning'});
			    	}
			    	if(_this.activeTabIndex==0){
			            _this.$data.queryResult = response.data;
		                _this.expandCondition=false;
	                }else if(_this.activeTabIndex==1){
	  	                _this.$data.queryResult1 = response.data;
		                _this.expandCondition1=false;
	                }
	                _this.$data.loading = false;
			    }
            })
            .catch(function (error) {
              _this.$notify.error({title: '错误',message: '查询数据失败，请联系系统管理员',offset: 100});
            });
          },
          clickResetBtn() {
        	  if(this.activeTabIndex==0){
				this.queryCondition.year="";
				this.queryCondition.season="";
				this.queryCondition.month=[];
				this.queryCondition.brand="";
				this.queryCondition.serial="";
				this.queryCondition.originalSerial="";
				this.queryCondition.style=[];
				this.queryCondition.goodsLevel=[];
				this.queryCondition.category=[];
				this.queryCondition.subCategory=[];
				this.queryCondition.planModelNo="";
				this.queryCondition.uniqueCode="";
				this.queryCondition.status="";
				this.queryCondition.codeStatus="";
				this.queryCondition.designNo="";
				this.queryCondition.colorNo="";
				this.queryCondition.deleted="";
				this.queryCondition.isAudit="";
				this.queryCondition.cytype="";
				this.queryCondition.orderType="";
				this.queryCondition.orderModel="";
				this.queryCondition.orderNo=[];
				this.queryCondition.displayGenre="";
				this.queryCondition.specifyType="";
				this.queryCondition.moduleLevel="";
				this.queryCondition.moduleNum="";
				this.queryCondition.categoryBuyer="";
				this.queryCondition.southNorthGenre="";
				this.queryCondition.goodsNo="";
              }else if(_this.activeTabIndex==1){
            	this.queryCondition1.year="";
  				this.queryCondition1.season="";
  				this.queryCondition1.month="";
  				this.queryCondition1.rangeValue=[];
  				this.queryCondition1.brand="";
  				this.queryCondition1.serial="";
  				this.queryCondition1.originalSerial="";
  				this.queryCondition1.style=[];
  				this.queryCondition1.goodsLevel=[];
  				this.queryCondition1.category=[];
  				this.queryCondition1.subCategory=[];
              }
          },

          clickExportBtn(){
              _this = this;
              var url = '/UniqueCodeMasterData/export';
              var restRequest = new URRestRequest();
              if(this.activeTabIndex==0){
          	    url = '/UniqueCodeMasterData/export';
                  var page = this.queryResult.currPage;
                  if(!this.queryCondition.year){
                      this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
                      return;
                  }
                  /* if(!this.queryCondition.month){
                      this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
                      return;
                  }
                  if(!this.queryCondition.season){
                      this.$notify({title: '警告',message: "请选择季节！",offset: 100,type:'warning'});
                      return;
                  }
                  if(!this.queryCondition.serial){
                      this.$notify({title: '警告',message: "请选择系列！",offset: 100,type:'warning'});
                      return;
                  } */
                  
                  if(page==null){
                      page = 1;
                  }
                  
                  restRequest.setCurrPage(page);
                  restRequest.setPageSize(this.queryResult.pageSize);
                  
                  //可以指定排序字段
                  //restRequest.addOrderBy("columnName??? desc");
				  // 按年份、季节（秋冬、春夏）、系列、原系列、风格、商品层、品类、中品类降序
    	          restRequest.addOrderBy("a.year desc");
    	          restRequest.addOrderBy("a.season desc");
    	          restRequest.addOrderBy("a.month desc");
    	          restRequest.addOrderBy("a.serial desc");
    	          restRequest.addOrderBy("a.original_serial desc");
    	          restRequest.addOrderBy("a.style desc");
    	          restRequest.addOrderBy("a.goods_level desc");
    	          restRequest.addOrderBy("a.category desc");
    	          restRequest.addOrderBy("a.sub_category desc");
    	          restRequest.addOrderBy("a.unique_code desc");

        	     //condition参数：字段名、值、运算符(eq,like,in,ne,lt,gt,le,ge)
    	         restRequest.addCondition("a.year",this.queryCondition.year,"eq");
   	    	     restRequest.addCondition("a.season",this.queryCondition.season,"eq");
   	    	     restRequest.addCondition("a.month",this.queryCondition.month.join(","),"in");
   	    	     restRequest.addCondition("a.brand",this.queryCondition.brand,"eq");
   	    	     restRequest.addCondition("a.serial",this.queryCondition.serial,"eq");
   	    	     restRequest.addCondition("a.original_serial",this.queryCondition.originalSerial,"eq");
   	    	     restRequest.addCondition("a.style",this.queryCondition.style.join(","),"in");
   	    	     restRequest.addCondition("a.goods_level",this.queryCondition.goodsLevel.join(","),"in");
   	    	     restRequest.addCondition("a.category",this.queryCondition.category.join(","),"in");
   	    	     restRequest.addCondition("a.sub_category",this.queryCondition.subCategory.join(","),"in");
   	    	     restRequest.addCondition("a.plan_model_no",this.queryCondition.planModelNo,"like");
   	    	     restRequest.addCondition("a.unique_code",this.queryCondition.uniqueCode,"like");
   	    	     restRequest.addCondition("a.status",this.queryCondition.status,"eq");
   	    	     restRequest.addCondition("a.code_status",this.queryCondition.codeStatus,"eq");
   	    	     restRequest.addCondition("a.design_no",this.queryCondition.designNo,"like");
   	    	     restRequest.addCondition("a.color_no",this.queryCondition.colorNo,"eq");
   	    	     restRequest.addCondition("a.deleted",this.queryCondition.deleted,"eq");
   	    	     restRequest.addCondition("a.is_audit",this.queryCondition.isAudit,"eq");
   	    	     restRequest.addCondition("a.cytype",this.queryCondition.cytype,"eq");
   	    	     restRequest.addCondition("a.order_type",this.queryCondition.orderType,"eq");
   	    	     restRequest.addCondition("a.order_model",this.queryCondition.orderModel,"eq");
   	    	     restRequest.addCondition("a.order_no",this.queryCondition.orderNo.join(","),"in");
   	    	     restRequest.addCondition("a.display_genre",this.queryCondition.displayGenre,"eq");
   	    	     restRequest.addCondition("a.specify_type",this.queryCondition.specifyType,"eq");
   	    	     restRequest.addCondition("a.module_level",this.queryCondition.moduleLevel,"eq");
   	    	     restRequest.addCondition("a.module_num",this.queryCondition.moduleNum,"eq");
   	    	     restRequest.addCondition("a.category_buyer",this.queryCondition.categoryBuyer,"eq");
   	    	     restRequest.addCondition("a.south_north_genre",this.queryCondition.southNorthGenre,"eq");
   	    	     restRequest.addCondition("c.goods_no",this.queryCondition.goodsNo,"eq");

        	     
          		}else if(this.activeTabIndex==1){
          			url = '/PlanProcessData/export/unique_code_check';
          			if(!this.queryCondition1.year){
                 	  	this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
             			return;
               	  }
          			
                  if(!this.queryCondition1.month){
                 		this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
             			return;
               	  }
                  
                    page = this.queryResult1.currPage;
                    restRequest.setCurrPage(page);
                    restRequest.setPageSize(this.queryResult1.pageSize);
                    //可以指定排序字段
                    //restRequest.addOrderBy("columnName??? desc");
          	      //condition参数：字段名、值、运算符(eq,like,in,ne,lt,gt,le,ge)
           	     restRequest.addCondition("data_type","unique_code_check","eq");
           	     restRequest.addCondition("year",this.queryCondition1.year,"eq");
           	     restRequest.addCondition("season",this.queryCondition1.season,"eq");
           	     restRequest.addCondition("month",this.queryCondition1.month,"eq");
           	     restRequest.addCondition("range_type",this.queryCondition1.rangeType,"eq");
           	     restRequest.addCondition("range_value",this.queryCondition1.rangeValue.join(","),"in");
           	     restRequest.addCondition("brand",this.queryCondition1.brand,"eq");
           	     restRequest.addCondition("serial",this.queryCondition1.serial,"eq");
           	     restRequest.addCondition("original_serial",this.queryCondition1.originalSerial,"eq");
           	     restRequest.addCondition("style",this.queryCondition1.style.join(","),"in");
           	     restRequest.addCondition("goods_level",this.queryCondition1.goodsLevel.join(","),"in");
           	     restRequest.addCondition("category",this.queryCondition1.category.join(","),"in");
           	     restRequest.addCondition("sub_category",this.queryCondition1.subCategory.join(","),"in");
                }
              
    	      this.loading = true;
              this.loadText = "导出数据中...";

              axios.post(url,restRequest.getRequestData())
                .then(function (response) {
    			    if(response.data.code==null||response.data.code!=0){
    			    	_this.$notify.error({title: '导出失败',message: response.data.message,offset: 100});
    			    	_this.$data.loading = false;
    			    }else{
    	              var downloadLink = "/DownloadFile/"+response.data.data.fileName+"/"+response.data.data.extName;
    	              _this.$data.loading = false;
    	              downloadFile(downloadLink);
    			    }

                })
                .catch(function (error) {
                  console.log(error);
                  _this.$notify.error({title: '错误',message: '导出数据失败，请联系系统管理员',offset: 100});
                });
          },
        /* clickExportCancelBtn() {
  			this.showExportDialog = false;
  		},  */
        clickImportBtn(type){
      	  this.uploadDialogVisible=true;
      	  if(type==="planCheck"){
      		this.uploadTitle="企划校验过程中，导入唯一码";
      		this.uploadTemplateUrl="/template/UniqueCodePlanCheckTemplate.xlsx";
      		this.uploadAction="/UniqueCodeMasterData/importExcel/planCheck";
      	  }else if(type==="pushPlm"){
       		this.uploadTitle="对接PLM，导入唯一码";
            this.uploadTemplateUrl="/template/UniqueCodePushPlmTemplate.xlsx";
         	this.uploadAction="/UniqueCodeMasterData/importExcel/pushPlm";
          }else if(type==="noPushPlm"){
         	this.uploadTitle="不对接PLM，导入唯一码";
            this.uploadTemplateUrl="/template/UniqueCodeNoPushPlmTemplate.xlsx";
            this.uploadAction="/UniqueCodeMasterData/importExcel/noPushPlm";
          }
        },
        handleUploadSuccess(res,file,fileList){
			this.fileList=[];
			this.uploadDialogVisible=false;
			if(JSON.stringify(res.success)==="false"){
				//this.$message({message: '导入失败: ' + JSON.stringify(res.message), type: 'error' });
				this.$notify.error({title: '导入失败',message: JSON.stringify(res.message),offset: 100,duration:0});
			}else{
				this.$message({ message: '导入成功',type: 'success' });
				//this.queryData();
			}
		},
		handleUploadError(err, file, fileList){
			this.fileList=[];
			this.uploadDialogVisible=false;
			this.$notify.error({title: '导入失败',message: JSON.stringify(res.message),offset: 100});
			//this.$message({message: '导入失败' + err, type: 'error' });
		},
		beforeUpload(file) {
            let Xls = file.name.split('.');
            if(Xls[1] === 'xls'||Xls[1] === 'xlsx'){
                return file
            }else {
                this.$message.error('只能上传   xls、xlsx 文件');
                return false;
            }
        }, 
        clickDeleteBtn(){  
	      if(!this.queryCondition.year){
      		  this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
      		  return;
      	  }
      	  if(!this.queryCondition.month){
      		  this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
      		  return;
      	  }
      	  if(!this.queryCondition.serial){
      		  this.$notify({title: '警告',message: "请选择系列！",offset: 100,type:'warning'});
      		  return;
      	  }
      	  if(!this.queryResult.data){
  			  this.$notify({title: '警告',message: "请先查询出数据再删除！",offset: 100,type:'warning'});
  			  return;
  		  }
      	  
      	  this.$confirm('此操作将永久删除该数据, 是否继续?', '提示', {
		          confirmButtonText: '确定',
		          cancelButtonText: '取消',
		          type: 'warning',
		          center: true
		        }).then(() => {
		          this.deleteData();
		        }).catch(() => {});
        },
        deleteData(){
      	  _this = this;
      	  var url = '/UniqueCodeMasterData/delete';
      	  var restRequest = new URRestRequest();
	     restRequest.addCondition("year",this.queryCondition.year,"eq");
	     restRequest.addCondition("season",this.queryCondition.season,"eq");
	     restRequest.addCondition("month",this.queryCondition.month.join(","),"in");
	     restRequest.addCondition("brand",this.queryCondition.brand,"eq");
	     restRequest.addCondition("serial",this.queryCondition.serial,"eq");
	     restRequest.addCondition("original_serial",this.queryCondition.originalSerial,"eq");
	     restRequest.addCondition("style",this.queryCondition.style.join(","),"in");
	     restRequest.addCondition("goods_level",this.queryCondition.goodsLevel.join(","),"in");
	     restRequest.addCondition("category",this.queryCondition.category.join(","),"in");
	     restRequest.addCondition("sub_category",this.queryCondition.subCategory.join(","),"in");
	     restRequest.addCondition("plan_model_no",this.queryCondition.planModelNo,"like");
	     restRequest.addCondition("unique_code",this.queryCondition.uniqueCode,"like");
	     restRequest.addCondition("status",this.queryCondition.status,"eq");
	     restRequest.addCondition("code_status",this.queryCondition.codeStatus,"eq");
	     restRequest.addCondition("design_no",this.queryCondition.designNo,"like");
	     restRequest.addCondition("color_no",this.queryCondition.colorNo,"eq");
	     restRequest.addCondition("deleted",this.queryCondition.deleted,"eq");
	     restRequest.addCondition("cytype",this.queryCondition.cytype,"eq");
	     restRequest.addCondition("order_type",this.queryCondition.orderType,"eq");
	     restRequest.addCondition("order_model",this.queryCondition.orderModel,"eq");
	     restRequest.addCondition("order_no",this.queryCondition.orderNo.join(","),"in");
   	     restRequest.addCondition("display_genre",this.queryCondition.displayGenre,"eq");
	     restRequest.addCondition("specify_type",this.queryCondition.specifyType,"eq");
   	     restRequest.addCondition("module_level",this.queryCondition.moduleLevel,"eq");
   	     restRequest.addCondition("module_num",this.queryCondition.moduleNum,"eq");
   	     restRequest.addCondition("category_buyer",this.queryCondition.categoryBuyer,"eq");
   	     restRequest.addCondition("south_north_genre",this.queryCondition.southNorthGenre,"eq");

	     
	          this.loading = true;
	          this.loadText = "删除数据中...";

	          axios.post(url,restRequest.getRequestData())
	            .then(function (response) {
	              console.log(response);
				    if(response.data.code==null||response.data.code!=0){
				    	_this.$notify.error({title: '删除失败',message: response.data.message,offset: 100});
				    	_this.$data.loading = false;
				    }else{
				    	_this.$notify({title: '删除成功',message: response.data.message,offset: 100,type:"success"});
				    	_this.queryResult.currPage = 1;
						_this.queryData();
		              _this.$data.loading = false;
				    }
	            })
	            .catch(function (error) {
	              console.log(error);
	              _this.$notify.error({title: '错误',message: '删除失败，请联系系统管理员',offset: 100});
	            });
        },
        
        changeTab(tab, event){
	    	  this.activeTabIndex=tab.index;
	    },
	    clickCalculateBtn(){
  			this.showCalculateDialog = true;
	  		    this.calculateCondition={
		        	  year:"",
		        	  season:"",
		        	  month:"",
		        	  serial:"",
	   	        };
      	},
    	clickCalculateCancelBtn() {
  			this.showCalculateDialog = false;
  		}, 
  		calculate(){
      	  this.taskResult={
            	status:"",
            	message:"",
            	percentage:0,
            	progressStatus:""
            };
         	  if(!this.calculateCondition.year){
         		  this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
         		  return;
         	  }
         	  if(!this.calculateCondition.season){
         		  this.$notify({title: '警告',message: "请选择季节！",offset: 100,type:'warning'});
         		  return;
         	  }
         	  if(!this.calculateCondition.month){
         		  this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
         		  return;
         	  }
         	  
         	  var _this=this;
         	  var confirm="确定生成检核数据吗?";
         	  var url="/UniqueCodeCheck/unique_code_check/"+this.calculateCondition.year+"/"+this.calculateCondition.season +"/"+this.calculateCondition.month;
         	  if(this.activeTabIndex==1){
  			     confirm="确定生成检核数据吗?";
  		      }
         	  this.$confirm(confirm, '提示', {
                   confirmButtonText: '确定',
                   cancelButtonText: '取消',
                   type: 'warning'
                 }).then(() => {
                 	this.calculateData=true;
                 	//var url="/UniqueCodeSplit/calculate/" +this.calculateCondition.year+"/"+this.calculateCondition.season +"/"+this.calculateCondition.month+"/"+this.calculateCondition.serial;
                 	
                 	axios.get(url)
                      .then(function (response) {
                      	if(response.data.code==null||response.data.code!=0){
            			    	_this.$notify.error({title: '失败',message: response.data.message,offset: 100,duration:0});
            			    	_this.calculateData=false;
            			    }else{
            			    	
            			    	_this.taskResult.message=response.data.message;
            			    	var redisKey = response.data.data;
            			    	var refreshMsg = setInterval(function(){
            			    		axios.post("/RedisMessage/getMsg/"+redisKey,[])
              	                  .then(function (response) { 
              	                	  console.log(response.data);
              	                	if(response.data.code==null||response.data.code!=0){
              	      			    	_this.calculateData=false;
              	      			    }else{
      	        	      			    if(response.data.data.status==='end'){
      	        	      			    	_this.calculateData=false;
      	        	      			    	clearInterval(refreshMsg);
      	        	      			    	if(response.data.data.progressStatus==='success'){
      	        	      			    		_this.$notify.success({title: '成功',message: response.data.data.message,offset: 100,duration:0});
      	        	      			    	}else{
      	        	      			    		_this.$notify.error({title: '失败',message: response.data.data.message,offset: 100,duration:0});
      	        	      			    	}
      	        	      			    }else{
      	        	      			        _this.taskResult=response.data.data;
      	        	      			    }
              	      			    }
              	                  }); 
            			    	},2000);
            			    }
                      })
                      .catch(function (error) {
                    	  _this.calculateData=false;
                        _this.$notify.error({title: '错误',message: '失败，请联系系统管理员',offset: 100,duration:0});
                      });
                 }).catch(() => {
                     
                 }); 
  	    },
  	    getValueFieldData1(valueField,item){
  	    	var result="";
	    	  if(valueField==='value1' && item.value1!=null){
	    		  result=item.value1;
	    	  }else if(valueField==='value2' && item.value2!=null){	
	    		  result=item.value2;
	    	  }else if(valueField==='value3' && item.value3!=null){
	    		  result=item.value3Format;
	    	  }else if(valueField==='value4' && item.value4!=null){
	    		  result=item.value4Format;
	    	  }else if(valueField==='value5' && item.value5!=null){
	    		  result=item.value5;
	    	  }else if(valueField==='value6' && item.value6!=null){
	    		  result=item.value6;
	    	  }else if(valueField==='value7' && item.value7!=null){
	    		  result=item.value7Format;
	    	  }else if(valueField==='value8' && item.value8!=null){
	    		  result=item.value8;
	    	  }else if(valueField==='value9' && item.value9!=null){
	    		  result=item.value9;
	    	  }else if(valueField==='value10' && item.value10!=null){
	    		  result=item.value10;
	    	  }else if(valueField==='value11' && item.value11!=null){
	    		  result=item.value11;
	    	  }else if(valueField==='value12' && item.value12!=null){
	    		  result=item.value12;
	    	  }else if(valueField==='value13' && item.value13!=null){
	    		  result=item.value13;
	    	  }else if(valueField==='value14' && item.value14!=null){
	    		  result=item.value14;
	    	  }else if(valueField==='value15' && item.value15!=null){
	    		  result=item.value15Format;
	    	  }else if(valueField==='value16' && item.value16!=null){
	    		  result=item.value16;
	    	  }else if(valueField==='value17' && item.value17!=null){
	    		  result=item.value17;
	    	  }else if(valueField==='value18' && item.value18!=null){
	    		  result=item.value18;
	    	  }else if(valueField==='value19' && item.value19!=null){
	    		  result=item.value19;
	    	  }else if(valueField==='value20' && item.value20!=null){
	    		  result=item.value20;
	    	  }
	    	  return result;
	    },
        changeVersion() {
            this.lastVersionNo = "";
            this.newVersionNo = "";
            this.lastVersionDisabledSubmit = true;
            this.newVersionDisabledSubmit = true;
			if(!this.submitVersionCondition.dataType || !this.submitVersionCondition.year 
					|| !this.submitVersionCondition.month || !this.submitVersionCondition.serial){
				return;
			}	
        	this.loading = true;
	        this.loadText = "获取版本数据中...";
			_this = this;
			var url = '/Version/getVersionOptionBO';
			
			axios.put(url, _this.submitVersionCondition).then(function (response) {
		    	_this.$data.loading = false;
			    if(response.data.code==null||response.data.code!=0){
			    	_this.$notify.error({title: '查询失败，请刷新页面重试',message: response.data.message,offset: 100});
			    }else{
			    	if(response.data.data.lastVersion){
			    		_this.lastVersionNo=response.data.data.lastVersion.versionNo;
			    		if(response.data.data.lastVersion.isMultipleActive===1){
			    			_this.lastVersionDisabledSubmit = false;
			    		}
			    	}
			    	if(response.data.data.newVersion){
			    		_this.newVersionNo=response.data.data.newVersion.versionNo;
		    			_this.newVersionDisabledSubmit = false;
			    	}
			    } 
			  }).catch(function (error) {
			    console.log(error);
			    _this.$data.loading = false;
			    _this.$notify.error({title: '错误',message: '查询失败，请刷新页面重试!',offset: 100});
			  });
  		},
	    clickSubmitVersionBtn(){
    		this.showSubmitVersionDialog = true;
  		    this.submitVersionCondition={
  	        	  dataType:"uniqueCode",
	        	  year:"",
	        	  season:"",
	        	  month:"",
	        	  serial:"",
	        	  versionNo:"",
   	        };
  		    this.lastVersionNo = "";
            this.newVersionNo = "";
            this.lastVersionDisabledSubmit = true;
            this.newVersionDisabledSubmit = true;
        },
        clickSubmitVersionCancelBtn() {
    	  this.showSubmitVersionDialog = false;
        }, 
        submitVersion(type){
        	if(type==="lastVersion"){
        		this.submitVersionCondition.versionNo = this.lastVersionNo;
        	}else if(type==="newVersion"){
        		this.submitVersionCondition.versionNo = this.newVersionNo;
        	}
          this.taskResult={
        	status:"",
        	message:"",
        	percentage:0,
        	progressStatus:""
          };
     	  if(!this.submitVersionCondition.year){
     		  this.$notify({title: '警告',message: "请选择年份！",offset: 100,type:'warning'});
     		  return;
     	  }
     	  if(!this.submitVersionCondition.month){
     		  this.$notify({title: '警告',message: "请选择月份！",offset: 100,type:'warning'});
     		  return;
     	  }
     	  if(!this.submitVersionCondition.serial){
       		 this.$notify({title: '警告',message: "请选择系列！",offset: 100,type:'warning'});
    		 return;
          } 
     	  if(!this.submitVersionCondition.versionNo){
	       	 this.$notify({title: '警告',message: "版本号,不能提交！",offset: 100,type:'warning'});
	    	 return;
	      } 
     	  
     	  var _this=this;
     	  var confirm="确定提交版本号"+this.submitVersionCondition.versionNo+"吗?";
     	  var url="/UniqueCodeMasterData/submitVersion";
     	   
     	  this.$confirm(confirm, '提示', {
               confirmButtonText: '确定',
               cancelButtonText: '取消',
               type: 'warning'
             }).then(() => {
             	this.submitVersionData=true;
             	this.newVersionDisabledSubmit=true;
             	this.lastVersionDisabledSubmit=true;
             	//console.log(JSON.stringify(_this.submitVersionCondition))
             	axios.post(url, _this.submitVersionCondition)
                  .then(function (response) {
                  	if(response.data.code==null||response.data.code!=0){
        			    	_this.$notify.error({title: '失败',message: response.data.message,offset: 100,duration:0});
        			    	_this.submitVersionData=false;
        			    }else{
        			    	
        			    	_this.taskResult.message=response.data.message;
        			    	var redisKey = response.data.data;
        			    	var refreshMsg = setInterval(function(){
        			    		axios.post("/RedisMessage/getMsg/"+redisKey,[])
          	                  .then(function (response) { 
          	                	  console.log(response.data);
          	                	if(response.data.code==null||response.data.code!=0){
          	      			    	_this.submitVersionData=false;
          	      			    }else{
            	      			    if(response.data.data.status==='end'){
            	      			    	_this.submitVersionData=false;
            	      			    	clearInterval(refreshMsg);
            	      			    	if(response.data.data.progressStatus==='success'){
            	      			    		_this.$notify.success({title: '成功',message: response.data.data.message,offset: 100,duration:0});
            	      			    	}else{
            	      			    		_this.$notify.error({title: '失败',message: response.data.data.message,offset: 100,duration:0});
            	      			    	}
            	      			    }else{
            	      			        _this.taskResult=response.data.data;
            	      			    }
          	      			    }
          	                  }); 
        			    	},2000);
        			    }
                  })
                  .catch(function (error) {
                	  _this.submitVersionData=false;
                    _this.$notify.error({title: '错误',message: '失败，请联系系统管理员',offset: 100,duration:0});
                  });
             }).catch(() => {
                 
             }); 
        },
        clickPushPlmBtn(type){
      	  if (this.multipleSelection.length == 0) {
      		this.$message({showClose: true,message: '请至少选择一条数据,  左侧复选框 选中',type: 'error'});
              return;
          }
      	  if(type==="delayedPush"){
	  	      this.confirmDialogVisible = true;
	  	      this.confirmTitle = "延时发布";
	  	      this.confirmRequest = "delayedPush";
	  	      this.confirmDesc = "适用于大批量数据发布,点击按钮后将在次日凌晨定时进行发布,";
      	  }else if(type==="realTimePush"){
          	  if (this.multipleSelection.length >20) {
            		this.$message({showClose: true,message: '请至多选择20条数据,  左侧复选框 选中',type: 'error'});
                    return;
                }
  	  	      this.confirmDialogVisible = true;
  	  	      this.confirmTitle = "实时发布";
  	  	      this.confirmRequest = "realTimePush";
	  	      this.confirmDesc = "适用于个别数据发布,点击按钮后实时进行发布,";
      	  }
        },
        confirmSummitBtn(){
        	this.confirmDialogVisible = false;
        	var ids = [];
        	for(var i=0;i<this.multipleSelection.length;i++) {
        		ids.push(this.multipleSelection[i].id);
        	}
        	
        	this.loading = true;
	        this.loadText = this.confirmTitle+"数据中...";
            var url = '';
            if(this.confirmRequest==="delayedPush"){
        	   url = '/UniqueCodeMasterData/pushPlm/delayedPush';
            }else if(this.confirmRequest==="realTimePush"){
        	   url = '/UniqueCodeMasterData/pushPlm/realTimePush';
            }
			 axios.put(url, ids).then(function (response) {
			    if(response.data.code==null||response.data.code!=0){
			    	_this.$notify.error({title: '操作失败',message: response.data.message,offset: 100,duration:0});
			    	_this.$data.loading = false;
			    }else{
				    _this.$notify.info({title: '',message: '操作成功',offset: 100});
				    _this.$data.loading = false;
				    _this.queryData();
			    }
			  }).catch(function (error) {
				console.log(error);
			    _this.$notify.error({title: '错误',message: '操作数据失败，请联系系统管理员',offset: 100});
			    _this.$data.loading = false;
			  });	
        },
        clickCanclePushPlmBtn(type) {
  			//debugger;
			if (this.multipleSelection.length == 0) {
        		this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection.length > 1) {
        		this.$message({showClose: true,message: '只能选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }

        	var ids = [];
        	for(var i=0;i<this.multipleSelection.length;i++) {
        		ids.push(this.multipleSelection[i].id);
        	}
        	this.loading = true;
	        this.loadText = "获取取消款数据中...";
			_this = this;
			var url = '/UniqueCodeMasterData/searchCanclePushData';
			if(type==="isPush"){
				url = '/UniqueCodeMasterData/searchCanclePushData';
				this.canclePushPlmTitle="取消款";
				this.canclePushPlmSaveUrl = "/UniqueCodeMasterData/canclePlanModelNo";
			}else if(type==="unPush"){
				url = '/UniqueCodeMasterData/searchCanclePushDataUnPush';
				this.canclePushPlmTitle="删除款";
				this.canclePushPlmSaveUrl = "/UniqueCodeMasterData/canclePlanModelNoUnPush";
			}
			this.canclePushPlmInstance={
					planModelNo: "",
					uniqueCode: "",
					deletedReason: "",
			};
			
			axios.put(url, ids).then(function (response) {
		    	_this.$data.loading = false;
			    if(response.data.code==null||response.data.code!=0){
			    	_this.$notify.error({title: '查询失败，请刷新页面重试',message: response.data.message,offset: 100});
			    }else{
			    	console.log(response.data.data)
			    	_this.canclePushPlmInstance = response.data.data;
			    	_this.canclePushPlmDialogVisible = true;
			    } 
			  }).catch(function (error) {
			    console.log(error);
			    _this.$data.loading = false;
			    _this.$notify.error({title: '错误',message: '查询失败，请刷新页面重试!',offset: 100});
			  });
  		},
		clickCancelCancelPushPlmBtn() {
			this.canclePushPlmDialogVisible = false;
		},
		clickSaveCanclePushPlmBtn() {
	     	  if(!this.canclePushPlmInstance.deletedReason){
		       	 this.$notify({title: '警告',message: "请填写取消款/删除原因！",offset: 100,type:'warning'});
		    	 return;
		      } 
	     	  if(!this.canclePushPlmInstance.deletedReason.length>200){
		       	 this.$notify({title: '警告',message: "取消/删除款原因过长，请控制在200个字符以内！",offset: 100,type:'warning'});
		    	 return;
		      }
	     	  
	     	  var _this=this;
	     	  var url=this.canclePushPlmSaveUrl;
           	  this.canclePushPlmData=true;
	     	   
           	axios.post(url, _this.canclePushPlmInstance)
            .then(function (response) {
            	if(response.data.code==null||response.data.code!=0){
			    	_this.$notify.error({title: '失败',message: response.data.message,offset: 100,duration:0});
			    	_this.canclePushPlmData=false;
			    }else{
			    	_this.$notify.info({title: '',message: '操作成功',offset: 100});
			    	_this.canclePushPlmData=false;
			    	_this.canclePushPlmDialogVisible=false;
				    _this.queryData();
			    }
            })
            .catch(function (error) {
          	  _this.canclePushPlmData=false;
              _this.$notify.error({title: '错误',message: '失败，请联系系统管理员',offset: 100,duration:0});
            });
           	
		},

		//推送PLM操作
  		clickPushPlmAddBtn() {
			openDialog('新增','/UniqueCodeMasterDataPushPlmEdit',$(window).width()-10,700,'min');
		},
		clickPushPlmUpdateBtn() {
			if (this.multipleSelection.length == 0) {
        		this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection.length > 1) {
        		this.$message({showClose: true,message: '只能选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (!this.multipleSelection[0].planModelNo) {
        		this.$message({showClose: true,message: '企划款号为空，不能做对接PLM操作',type: 'error'});
                return;
            }
			openDialog('修改','/UniqueCodeMasterDataPushPlmEdit?id='+this.multipleSelection[0].id,$(window).width()-10,700,'min');
		},
		clickEditPlanModelNoBtn() {
			if (this.multipleSelection.length == 0) {
        		this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection.length > 1) {
        		this.$message({showClose: true,message: '只能选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (!this.multipleSelection[0].planModelNo) {
        		this.$message({showClose: true,message: '企划款号为空，不能做对接PLM操作',type: 'error'});
                return;
            }
			openDialog('修改','/UniqueCodeMasterDataPlanModelNoDataEdit?id='+this.multipleSelection[0].id,$(window).width()-10,700,'min');
		},
		//不推送PLM操作
  		clickNoPushPlmAddBtn() {
			openDialog('新增','/UniqueCodeMasterDataNoPushPlmEdit',$(window).width()-10,700,'min');
		},
		clickAddDesignNoBtn(){
			if (this.multipleSelection.length == 0) {
        		this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection.length > 1) {
        		this.$message({showClose: true,message: '只能选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection[0].planModelNo) {
        		this.$message({showClose: true,message: '存在企划款号的数据，请到对接PLM操作中编辑',type: 'error'});
                return;
            }
			openDialog('对应设计号','/UniqueCodeDesignNo/'+this.multipleSelection[0].uniqueCode,$(window).width()-10,700,'min');
		},
		clickNoPushPlmUpdateBtn() {
			if (this.multipleSelection.length == 0) {
        		this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection.length > 1) {
        		this.$message({showClose: true,message: '只能选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
			if (this.multipleSelection[0].planModelNo) {
        		this.$message({showClose: true,message: '存在企划款号的数据，请到对接PLM操作中编辑',type: 'error'});
                return;
            }
			openDialog('修改','/UniqueCodeMasterDataNoPushPlmEdit?id='+this.multipleSelection[0].id,$(window).width()-10,700,'min');
		},
		clickCancelDeleteByUniqueCodeBtn() {
			this.deleteUniqueCodeInstance = false;
		},
		clickDeleteByUniqueCodeBtn(){
			if (this.multipleSelection.length == 0) {
        		this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
                return;
            }
        	var uniqueCodes = "";
        	for(var i=0;i<this.multipleSelection.length;i++) {
        		if(uniqueCodes === ""){
        			uniqueCodes = this.multipleSelection[i].uniqueCode;
        		}else{
        			uniqueCodes += "、" + this.multipleSelection[i].uniqueCode;
        		}
        		if(this.multipleSelection[i].planModelNo){
        			this.$message({showClose: true,message: '存在企划款号的数据，请到对接PLM操作中编辑',type: 'error'});
                    return;
        		}
        	}
        	this.deleteByUniqueCodeDialogVisible = true;
            this.deleteUniqueCodeInstance.uniqueCode=uniqueCodes;
            this.deleteUniqueCodeInstance.deletedReason="";
		},
		clickSaveDeleteUniqueCodeBtn(){
			if(!this.deleteUniqueCodeInstance.deletedReason){
		       	this.$notify({title: '警告',message: "请填写取消款原因！",offset: 100,type:'warning'});
		    	return;
		    } 
	     	if(!this.deleteUniqueCodeInstance.deletedReason.length>200){
		       	this.$notify({title: '警告',message: "取消款原因过长，请控制在200个字符以内！",offset: 100,type:'warning'});
		    	return;
		    }
	     	  
	     	var _this=this;
	     	var url="/UniqueCodeMasterData/deleteByUniqueCode";
          	this.deleteUniqueCodeData=true;
	     	   
          	axios.post(url, _this.deleteUniqueCodeInstance)
           .then(function (response) {
		    _this.deleteUniqueCodeData=false;
           	if(response.data.code==null||response.data.code!=0){
			    	_this.$notify.error({title: '失败',message: response.data.message,offset: 100,duration:0});
			    }else{
			    	_this.$notify.info({title: '',message: '操作成功',offset: 100});
			    	_this.deleteByUniqueCodeDialogVisible=false;
				    _this.queryData();
			    }
           })
           .catch(function (error) {
         	  _this.deleteUniqueCodeData=false;
             _this.$notify.error({title: '错误',message: '失败，请联系系统管理员',offset: 100,duration:0});
           });
          	
		},
		clickDepAuditBtn(){
			   if (this.multipleSelection.length == 0) {
			          this.$message({showClose: true,message: '请选择一条数据,  左侧复选框 选中',type: 'error'});
			                return;
			            }
			   if (this.multipleSelection.length > 1) {
			          this.$message({showClose: true,message: '只能选择一条数据,  左侧复选框 选中',type: 'error'});
			                return;
			            }
			   if(!this.multipleSelection[0].designNo){
			    this.$message({showClose: true,message: '未对应设计号，无法审核',type: 'error'});
			                return;
			   }
			   openDialog('审核','/UniqueCodeDepAudit/'+this.multipleSelection[0].designNo,$(window).width()-10,900,'min');
			  },
      }
    });
  
    var dialogCallback = function() {
    		closedialog();
    		vm.clickSearchBtn();
    }
  
    $(document).ready(function(){    
    	$(document).keydown(function (e) {
    		if ( e.which == 13) {	
    	    	if(this_let.activeTabIndex==0){
        	    	if(this_let.expandCondition===true){
        	    		this_let.clickSearchBtn();	
        	    	}else{
        	    		this_let.expandCondition=true;
        	    	}
    			}else if(this_let.activeTabIndex==1){
        	    	if(this_let.expandCondition1===true){
        	    		this_let.clickSearchBtn();	
        	    	}else{
        	    		this_let.expandCondition1=true;
        	    	}
    			}
    	    }
    	});  
    	
    	$(window).load(function(){
    		this_let.tableHeight =$(window).height() -$("#data_table").offset().top-1;
        });
    	
    	$(window).resize(function(){
    		this_let.tableHeight =$(window).height() -$("#data_table").offset().top-1;
    	});  
    });
    /*]]>*/
  </script>
</html>